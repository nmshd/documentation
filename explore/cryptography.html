<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.2 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Cryptography - enmeshed</title>
<meta name="description" content="Backbone Layer Encryption">


  <meta name="author" content="enmeshed Team">
  
  <meta property="article:author" content="enmeshed Team">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="enmeshed">
<meta property="og:title" content="Cryptography">
<meta property="og:url" content="/explore/cryptography">


  <meta property="og:description" content="Backbone Layer Encryption">







  <meta property="article:published_time" content="2024-12-18T15:33:57+01:00">






<link rel="canonical" href="/explore/cryptography">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="enmeshed Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="/assets/css/overwrite.css" rel="stylesheet" type="text/css" />
<link href="/assets/css/enmeshed.css" rel="stylesheet" type="text/css" />

<!-- The following lines are needed because otherwise Prism (the syntax highlighter RapiDoc uses) breaks Rouge (the syntax highlighter we use) -->
<script>
    window.Prism = window.Prism || {};
    Prism.manual = true;
</script>
<script type="module" src="https://unpkg.com/rapidoc@9.2.0/dist/rapidoc-min.js"></script>



  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          enmeshed
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/use"
                
                
              >Use</a>
            </li><li class="masthead__menu-item">
              <a
                href="/explore"
                
                
              >Explore</a>
            </li><li class="masthead__menu-item">
              <a
                href="/integrate"
                
                
              >Integrate</a>
            </li><li class="masthead__menu-item">
              <a
                href="/operate"
                
                
              >Operate</a>
            </li><li class="masthead__menu-item">
              <a
                href="/contribute"
                
                
              >Contribute</a>
            </li><li class="masthead__menu-item">
              <a
                href="/blog"
                
                
              >Blog</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      <h3>Explore enmeshed</h3>
      
      <nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      
      
        <li>
          
            <span class="nav__sub-title">First things first</span>
          

          
          <ul>
            
              <li><a href="/explore/how_does_enmeshed_work">How does enmeshed work?</a></li>
            
              <li><a href="/explore/example-scenarios">Example Scenarios</a></li>
            
              <li><a href="/explore/faq">Frequently Asked Questions</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">How we think</span>
          

          
          <ul>
            
              <li><a href="/explore/integration">Integration Considerations</a></li>
            
              <li><a href="/explore/security">Security Considerations</a></li>
            
              <li><a href="/explore/privacy">Privacy Considerations</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Our Layers</span>
          

          
          <ul>
            
              <li><a href="/explore/layers/backbone">Backbone Layer</a></li>
            
              <li><a href="/explore/layers/transport">Transport Layer</a></li>
            
              <li><a href="/explore/layers/consumption">Consumption Layer</a></li>
            
              <li><a href="/explore/layers/integration">Integration Layer</a></li>
            
              <li><a href="/explore/layers/user-experience">User-Experience Layer</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Components in-detail</span>
          

          
          <ul>
            
              <li><a href="/explore/app">App</a></li>
            
              <li><a href="/explore/backbone">Backbone</a></li>
            
              <li><a href="/explore/connector">Connector</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Expert Corner</span>
          

          
          <ul>
            
              <li><a href="/explore/addresses">Addresses</a></li>
            
              <li><a href="/explore/runtime">Runtime</a></li>
            
              <li><a href="/explore/cryptography" class="active">Cryptography</a></li>
            
              <li><a href="/explore/blockchain">Why no blockchain?</a></li>
            
          </ul>
          
        </li>
      
    
  </ul>
</nav>

    
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Cryptography">
    <meta itemprop="description" content="Backbone Layer Encryption">
    <meta itemprop="datePublished" content="2024-12-18T15:33:57+01:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="/explore/cryptography" itemprop="url">Cryptography
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h1 id="backbone-layer-encryption">Backbone Layer Encryption</h1>

<p>The communication with the Backbone is encrypted on the http transport layer. This is done by using the transport-layer-security (TLS) standard which is common throughout the Internet. This prevents third parties to access any data communication to and from the Backbone, like authentication tokens of devices, recipient addresses, timestamps.</p>

<p>Stored data - so called “data at rest” - is encrypted on the respective systems, like databases. This is relevant for the underlying infrastructure services of the Backbone. The cloud infrastructure provider, is not able to access the data from the hard drives, as it is encrypted.</p>

<h1 id="transport-layer-encryption">Transport Layer Encryption</h1>

<p>The communication between Identities via the Backbone is end-to-end encrypted. This means, that nobody between the digital Identities (i.e. their devices) is able to access the data. This prevents even the operator of the Backbone to access the payload which is sent between Identities. It is also reducing the threats of data leaks to a minimum, as only the metadata could be leaked. Such a metadata leak would be the same level of information leak as a public blockchain is doing all along its public network.</p>

<p>We use modern cryptographic algorithms to our best knowledge. The cryptographic library we use is <a href="https://doc.libsodium.org/">libsodium</a> and its JavaScript wrapper <a href="https://github.com/jedisct1/libsodium.js">libsodium.js</a>. Libsodium is a fork of NaCl which is primarily stripping out unnecessary or dangerours interfaces or algorithms.</p>

<p>Based on libsodium, we use elliptic curve cryptography with the Edwards Curve (Ed25519 or Curve25519) which is one of the most secure elliptic curves available. It is used by the <a href="https://csrc.nist.gov/publications/detail/fips/186/5/final">Digital Signature Standard (DSS)</a> and one of a few elliptic curves passing the tests on <a href="https://safecurves.cr.yp.to">safecurves.cr.yp.to/</a>. Additional references supporting the Edwards Curve are <a href="https://eprint.iacr.org/2020/823.pdf">The Provable Security of Ed25519: Theory and Practice</a> and <a href="https://soatok.blog/2022/05/19/guidance-for-choosing-an-elliptic-curve-signature-algorithm-in-2022/">Guidance for Choosing an Elliptic Curve Signature Algorithm in 2022</a>.</p>

<p>Key derivations are used as often as possible, in addition to strong and unique initialization vectors.</p>

<h2 id="used-algorithms">Used Algorithms</h2>

<p>Symmetric Encryption: <a href="https://doc.libsodium.org/secret-key_cryptography/aead/chacha20-poly1305/xchacha20-poly1305_construction">XChaCha-Poly1305 (256 bit)</a></p>

<p>Digital Signatures: ECDSA Ed25519 (Elliptic Curve Digital Signature Algorithm with Curve25519), 256bit</p>

<p>Key Exchange: ECDH X25519 (Elliptic Curve Diffie Hellman with Curve25519), 256bit</p>

<h2 id="used-randomness">Used Randomness</h2>

<p>To reach enough entropy for safe private and secret keys, key generation is based on randomness, which is very important for modern cryptography. Applications rely on cryptographic libraries for randomness which in turn use software-based randomness (like timestamps, calculation durations and seeds) and hardware-supported randomness (like sensor input, hardware ids or even dedicated randomness modules).</p>

<p>Our randomness is based on the mentioned library <a href="https://github.com/jedisct1/libsodium.js">libsodium.js</a> which is using the standard <a href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues">WebCrypto APIs</a>. With the WebCrypto API, the browser’s randomness generator is used. The browser uses either an own implementation of a secure Pseudo-Random-Generator, or - in modern browsers - the operating system’s random generator, which is usually taking hardware into consideration. Our solution is thus using the same mechanisms the browser use for securing Transport Layer Security (TLS) communication over the world wide web.</p>

<h2 id="identity-keys">Identity Keys</h2>

<p>Every Identity needs a set of keys used by the Identity in order to digitally sign information (Identity Signature Key) and enable cross-device synchronization (Synchronization Base Key).</p>

<h3 id="identity-signature-private-key">Identity Signature Private Key</h3>

<p>Abbreviated: PrivId</p>

<p>The Identity’s most secret, private signature key with which it is signing certificates, documents or the creation of new devices.</p>

<h3 id="identity-signature-public-key">Identity Signature Public Key</h3>

<p>Abbreviated: PubId</p>

<p>The Identity’s public key which acts as the primary form of verifying data signed by an Identity. Only with a known Identity Signature Public Key of an Identity, the signature of an Identity can be securely verified.</p>

<p>With the Identity’s public key, the Identity’s address is calculated.</p>

<p>Usually, you receive another Identity’s signature public key while making the first contact (e.g. from the RelationshipTemplate or the created Relationship followed upon it).</p>

<h3 id="synchronization-base-secret-key">Synchronization Base Secret Key</h3>

<p>The secret key which is used to derive the synchronization derived secret keys. The synchronization base secret key is randomly generated on creation for every Identity. The symmetric keys which are derived from the synchronization base key and are used to actually encrypt/decrypt the synchronization events.</p>

<h2 id="device-keys">Device Keys</h2>

<p>One Identity has one to many devices using the Identity. In order to authenticate the devices between each other, a device creates an own signing key, which will never leave the device.</p>

<h2 id="device-signature-private-key">Device Signature Private Key</h2>

<p>Every device of an Identity has its own private key which is also not shared to other devices. With this, it is possible to have multi-factor authentication capabilities across different devices of one Identity.</p>

<p>Additionally, the private signature keys can be used to sign data which is synchronized across devices.</p>

<h2 id="device-signature-public-key">Device Signature Public Key</h2>

<p>The device’s public key which is stored in the Datawallet of an Identity and thus is know to any other device of the Identity. The public key can be used to verify data coming from other devices of an Identity.</p>

<h2 id="symmetric-encryption">Symmetric Encryption</h2>

<p>Symmetric encryption is used throughout this solution in order to securely encrypt sensitive data. Prior to a communication to a different device or Identity, a random secret key is generated and used to encrypt the payload. This secret key is then shared via a secure side-channel / out-of-band communication. This could be a Message communicated over enmeshed, a QR code shown in a browser session or any other secure communication channel. The secret key is never transmitted unencrypted over the Backbone, as this would break up the end-to-end encryption.</p>

<p>Examples where symmetric encryption is used:</p>

<ul>
  <li>Device-to-Device Synchronization</li>
  <li>Sharing Files</li>
  <li>Messages</li>
  <li>RelationshipTemplates</li>
  <li>Tokens</li>
</ul>

<p>For files only: In addition to the payload, metadata (like filename or mimetype) of the file needs to be separately encrypted. For this, another random secret key is generated for encrypting the metadata of the file. To omit unnecessary payload while sharing files, the generated secret key for actual file payload is stored within this metadata. Thus, only the generated secret key for the metadata must be shared (in addition to the file id).</p>

<h2 id="relationship-keys">Relationship Keys</h2>

<p>With each Relationship, there are Relationship keys automatically generated. These keys are used for signing and encrypting the communication with the Relationship on a technical level.</p>

<ul>
  <li>Relationship own exchange keypair: A pair of Relationship own exchange private key (PrivOwnX) and corresponding Relationship own exchange public key (PubOwnX). The Relationship own exchange private key is used to derive the masterRelationship secret keys (transmit and receive). The Relationship own exchange public key is communicated within the Relationship’s creationContent or creationResponseContent. The creationResponseContent is generated without user input upon relationship acceptance, only contains the key, and is not stored after its decryption.</li>
  <li>Relationship own signature keypair: A pair of Relationship signature private key (PrivOwn) and corresponding Relationship signature public key (PubOwn). The signature own private key is used for signing the communication with this Relationship. It is synchronized across all devices and signed by the device signature private key of the device which creates the Relationship or the RelationshipTemplate. The signature own public key is used for verifying the signatures of all communications with this Relationship.</li>
  <li>Relationship peer exchange public key: The peer’s exchange public key (PubPeerX) which is used to derive the master Relationship secret keys (transmit and receive).</li>
  <li>Relationship peer signature public key: The peer’s signature public key which is used to verify communication sent by the peer.</li>
  <li>Relationship receive derived secret key (SecPeer’): A derived symmetric key of the master, which is actually used for decryption.</li>
  <li>Relationship receive master secret key (SecPeer):
The symmetric master key for receiving communication of the Relationship. The key is derived by the Relationship peer exchange public key and the Relationship own exchange private key while onboarding. This key equals to the Relationship transmit master key of the peer.</li>
  <li>Relationship transmit derived secret key (SecOwn’): A derived symmetric key of the master, which is actually used for encryption.</li>
  <li>Relationship transmit master secret key (SecOwn):
The derived symmetric master key for transmitting communication to the Relationship. The key is derived by the Relationship peer exchange public key and the Relationship own exchange private key. This key equals to the Relationship receive master key of the peer.</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2024-12-18T15:33:57+01:00">December 18, 2024</time></p>

      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="footer-new">
    <div class="footer-row">
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">enmeshed</h5>
            <p class="footer-content">
                enmeshed ist eine Open Source Wallet, die einen Ende-zu-Ende verschlüsselten, digitalen Datenaustausch zwischen Bildungseinrichtungen und Lernenden sicherstellt.
                <br />
                <br />
                <small>enmeshed wurde von der j&s-soft AG entwickelt.</small>
            </p>
            <div class="footer-socials">
                <a class="footer-icon footer-social-icon footer-social-icon-twitter" href="https://twitter.com/enmeshed_jssoft" target="_blank">
                    <i class="fab fa-twitter"></i>
                </a>
                <a class="footer-icon footer-social-icon footer-social-icon-github" href="https://github.com/nmshd" target="_blank">
                    <i class="fab fa-github"></i>
                </a>
                <a class="footer-icon footer-social-icon footer-social-icon-linkedin" href="https://www.linkedin.com/showcase/enmeshed/" target="_blank">
                    <i class="fab fa-linkedin"></i>
                </a>
            </div>
        </div>
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">Kontakt</h5>
            <p class="footer-content">
                j&s-soft AG
                <br />
                Max-Jarecki-Straße 21
                <br />
                69115 Heidelberg
                <br />
                <br />
                <small
                    ><a href="tel:00496221431210"
                        ><span class="footer-contact-icon"><i aria-hidden="true" class="fas fa-phone-alt"></i></span>+49 (6221) 43121-0</a
                    ></small
                >
                <br />
                <small
                    ><a href="mailto:enmeshed@js-soft.com"
                        ><span class="footer-contact-icon"><i aria-hidden="true" class="fas fa-envelope"></i></span>enmeshed@js-soft.com</a
                    ></small
                >
            </p>
        </div>
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">Direkt zu</h5>
            <ul class="footer-menu">
                   
                <li>
                    <a href="https://js-soft.com" rel="nofollow noopener noreferrer" target="_blank"> j&s-soft Website</a>
                </li>
                  
                <li>
                    <a href="https://www.enmeshed.de" rel="nofollow noopener noreferrer" target="_blank"> enmeshed Website</a>
                </li>
                  
                <li>
                    <a href="https://github.com/nmshd" rel="nofollow noopener noreferrer" target="_blank"> enmeshed on GitHub</a>
                </li>
                  
                <li>
                    <a href="/legal" rel="nofollow noopener noreferrer" target="_blank"> Legal Disclosure</a>
                </li>
                  
                <li>
                    <a href="/privacy" rel="nofollow noopener noreferrer" target="_blank"> Privacy Statement</a>
                </li>
                  
                <li>
                    <a href="https://www.npmjs.com/search?q=%40nmshd" rel="nofollow noopener noreferrer" target="_blank"> NPM</a>
                </li>
                  
                <li>
                    <a href="https://enmeshed.eu/feed.xml" rel="nofollow noopener noreferrer" target="_blank"> RSS Feed</a>
                </li>
                  
            </ul>
        </div>
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">App Downloaden</h5>
            <p class="footer-downloads footer-content">
                <a href="https://apps.apple.com/de/app/enmeshed/id1576693742" target="_blank">
                    <img src="/assets/images/appstore.svg" class="logo-app logo-app__appstore" />
                </a>
                <a href="https://play.google.com/store/apps/details?id=eu.enmeshed.app&hl=de&gl=US" target="_blank">
                    <img src="/assets/images/gplay.svg" class="logo-app logo-app__gplaystore" />
                </a>
            </p>
        </div>
    </div>
</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
