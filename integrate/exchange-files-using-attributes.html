<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.1 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Exchange Files using Attributes - enmeshed</title>
<meta name="description" content="Communication between Identities involves exchanging uploaded Files with each other, for example:">


  <meta name="author" content="enmeshed Team">
  
  <meta property="article:author" content="enmeshed Team">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="enmeshed">
<meta property="og:title" content="Exchange Files using Attributes">
<meta property="og:url" content="/integrate/exchange-files-using-attributes">


  <meta property="og:description" content="Communication between Identities involves exchanging uploaded Files with each other, for example:">







  <meta property="article:published_time" content="2025-06-12T11:58:55+02:00">






<link rel="canonical" href="/integrate/exchange-files-using-attributes">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="enmeshed Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="/assets/css/overwrite.css" rel="stylesheet" type="text/css" />
<link href="/assets/css/enmeshed.css" rel="stylesheet" type="text/css" />

<!-- The following lines are needed because otherwise Prism (the syntax highlighter RapiDoc uses) breaks Rouge (the syntax highlighter we use) -->
<script>
    window.Prism = window.Prism || {};
    Prism.manual = true;
</script>
<script type="module" src="https://unpkg.com/rapidoc@9.2.0/dist/rapidoc-min.js"></script>



  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          enmeshed
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/use"
                
                
              >Use</a>
            </li><li class="masthead__menu-item">
              <a
                href="/explore"
                
                
              >Explore</a>
            </li><li class="masthead__menu-item">
              <a
                href="/integrate"
                
                
              >Integrate</a>
            </li><li class="masthead__menu-item">
              <a
                href="/operate"
                
                
              >Operate</a>
            </li><li class="masthead__menu-item">
              <a
                href="/contribute"
                
                
              >Contribute</a>
            </li><li class="masthead__menu-item">
              <a
                href="/blog"
                
                
              >Blog</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      <h3>Integrate enmeshed</h3>
      
      <nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      
      
        <li>
          
            <span class="nav__sub-title">Getting Started</span>
          

          
          <ul>
            
              <li><a href="/integrate/access-the-connector">Access the Connector</a></li>
            
              <li><a href="/integrate/integration-example">Integration example</a></li>
            
              <li><a href="/integrate/event-introduction">Event introduction</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Identities and Relationships</span>
          

          
          <ul>
            
              <li><a href="/integrate/establish-relationships">Establish Relationships</a></li>
            
              <li><a href="/integrate/exchange-messages">Exchange Messages</a></li>
            
              <li><a href="/integrate/terminate-relationships">Terminate Relationships</a></li>
            
              <li><a href="/integrate/delete-identities">Delete Identities</a></li>
            
              <li><a href="/integrate/manage-identitymetadata">Manage IdentityMetadata</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Working With Requests</span>
          

          
          <ul>
            
              <li><a href="/integrate/request-and-response-introduction">Request and Response introduction</a></li>
            
              <li><a href="/integrate/requests-via-relationshiptemplates">Requests via RelationshipTemplates</a></li>
            
              <li><a href="/integrate/requests-via-messages">Requests via Messages</a></li>
            
              <li><a href="/integrate/form-fields-within-requests">Form Fields Within Requests</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Manage Attributes</span>
          

          
          <ul>
            
              <li><a href="/integrate/attribute-introduction">Attribute introduction</a></li>
            
              <li><a href="/integrate/create-attributes-for-yourself">Create Attributes for yourself</a></li>
            
              <li><a href="/integrate/share-attributes-with-peer">Share Attributes with peer</a></li>
            
              <li><a href="/integrate/read-attributes-from-peer">Read Attributes from peer</a></li>
            
              <li><a href="/integrate/create-attributes-for-peer">Create Attributes for peer</a></li>
            
              <li><a href="/integrate/propose-attributes-to-peer">Propose Attributes to peer</a></li>
            
              <li><a href="/integrate/update-attributes-by-succession">Update Attributes by succession</a></li>
            
              <li><a href="/integrate/delete-attributes">Delete Attributes</a></li>
            
              <li><a href="/integrate/exchange-files-using-attributes" class="active">Exchange Files using Attributes</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Request Consent</span>
          

          
          <ul>
            
              <li><a href="/integrate/request-persistent-consent-of-peer">Request persistent consent of peer</a></li>
            
              <li><a href="/integrate/request-one-time-consent-of-peer">Request one-time consent of peer</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Data Model</span>
          

          
          <ul>
            
              <li><a href="/integrate/data-model-overview">Data Model Overview</a></li>
            
              <li><a href="/integrate/attribute-values">Attribute Values</a></li>
            
              <li><a href="/integrate/connector-events">Connector Events</a></li>
            
              <li><a href="/integrate/use-cases">Use Cases</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Migration Guides</span>
          

          
          <ul>
            
              <li><a href="/integrate/migration-from-v4-to-v5">Migration From v4 to v5</a></li>
            
              <li><a href="/integrate/migration-from-v5-to-v6">Migration From v5 to v6</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Troubleshooting</span>
          

          
          <ul>
            
              <li><a href="/integrate/error-codes">Error codes</a></li>
            
              <li><a href="/integrate/faq">FAQ</a></li>
            
              <li><a href="/integrate/support">Support</a></li>
            
          </ul>
          
        </li>
      
    
  </ul>
</nav>

    
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Exchange Files using Attributes">
    <meta itemprop="description" content="Communication between Identities involves exchanging uploaded Files with each other, for example:">
    <meta itemprop="datePublished" content="2025-06-12T11:58:55+02:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="/integrate/exchange-files-using-attributes" itemprop="url">Exchange Files using Attributes
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#upload-a-file">Upload a File</a></li><li><a href="#share-an-own-file-with-a-peer">Share an Own File With a Peer</a><ul><li><a href="#create-an-identityfilereference">Create an IdentityFileReference</a></li><li><a href="#share-an-identityfilereference">Share an IdentityFileReference</a></li><li><a href="#load-a-referenced-file">Load a Referenced File</a></li></ul></li><li><a href="#further-options-for-exchanging-files">Further Options for Exchanging Files</a><ul><li><a href="#utilization-of-a-proprietaryfilereference">Utilization of a ProprietaryFileReference</a></li></ul></li><li><a href="#transfer-the-ownership-of-a-file-to-a-peer">Transfer the Ownership of a File to a Peer</a><ul><li><a href="#request-for-transferring-the-ownership-of-a-file">Request for Transferring the Ownership of a File</a><ul><li><a href="#role-of-transferfileownershiprequestitem">Role of TransferFileOwnershipRequestItem</a></li><li><a href="#example-of-transferring-the-ownership-of-a-file">Example of Transferring the Ownership of a File</a></li><li><a href="#transfer-ownership-of-multiple-files">Transfer Ownership of Multiple Files</a></li></ul></li><li><a href="#send-and-receive-the-request">Send and Receive the Request</a><ul><li><a href="#request-via-relationshiptemplate">Request via RelationshipTemplate</a></li><li><a href="#request-via-message">Request via Message</a></li></ul></li><li><a href="#accept-the-request">Accept the Request</a><ul><li><a href="#accept-a-transferfileownershiprequestitem">Accept a TransferFileOwnershipRequestItem</a></li><li><a href="#reject-a-transferfileownershiprequestitem">Reject a TransferFileOwnershipRequestItem</a></li></ul></li><li><a href="#receive-the-response-to-the-request">Receive the Response to the Request</a></li></ul></li></ul>
            </nav>
          </aside>
        
        <p>Communication between Identities involves exchanging <a href="#upload-a-file">uploaded Files</a> with each other, for example:</p>

<ul>
  <li>A language school wants to send a student their language certificate.</li>
  <li>A university wants to send a student their certificate of enrollment.</li>
  <li>An applicant wants to send their curriculum vitae to a company.</li>
</ul>

<p class="notice--info">These examples all represent cases where the <a href="/integrate/data-model-overview#file">File</a> ought to be saved by the recipient for further use.
To this end, we store the File in the form of an <a href="/integrate/data-model-overview#attributes">Attribute</a>.
In contrast, it is also possible to send a simple File without an Attribute as an <code class="language-plaintext highlighter-rouge">attachment</code> of a <a href="/integrate/data-model-overview#message">Message</a>.
However, in this case the File cannot be further used by the recipient.
Thus, we only recommend to do so for Files that contain one-time-information for the recipient like a flyer.</p>

<p>This guide describes how an Integrator of a Connector can use a certain kind of <a href="/integrate/data-model-overview#attributes">Attribute</a>, the <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a>, to exchange Files.
To do so, the respective <a href="#upload-a-file">File must be uploaded to the Backbone</a> first.
Then, an explanation of how to <a href="#share-an-own-file-with-a-peer">share an own File with a peer</a> follows.
Also, <a href="#further-options-for-exchanging-files">further options for exchanging Files</a>, such as requesting the reading of a <a href="/integrate/data-model-overview#file">File</a> from a peer, are touched upon.
Lastly, the scenario of <a href="#transfer-the-ownership-of-a-file-to-a-peer">transferring the ownership of a File to a peer</a> is explained.
In contrast to the former case, this way the recipient becomes the owner of the actual File, that was uploaded to the Backbone by the sender.
This use case is especially important for certificates that the sender creates for the recipient.</p>

<p class="notice--info">The peer with whom a <a href="/integrate/exchange-files-using-attributes">File is exchanged using Attributes</a> can be an Integrator of another Connector or an App user.
The <a href="/integrate/data-model-overview#file">File</a> exchange flow described in this guide remains the same, even if some steps are performed automatically in the App.</p>

<h1 id="upload-a-file">Upload a File</h1>

<p>In order to be able to <a href="#share-an-own-file-with-a-peer">share a File with a peer</a> or to <a href="#transfer-the-ownership-of-a-file-to-a-peer">transfer the ownership of a File to a peer</a>, its content must first be uploaded to the Backbone in encrypted form.
To do this, consult the documentation of the <a href="/use-case-transport-upload-own-file">Upload own File</a> use case.
By uploading the <a href="/integrate/data-model-overview#file">File</a>, it is assigned an <code class="language-plaintext highlighter-rouge">id</code> and a <code class="language-plaintext highlighter-rouge">reference.truncated</code> with which it can be identified from now on.
Either of them can be specified as a parameter when executing the <a href="/use-case-transport-get-file-metadata">Get File metadata</a> use case in order to display the metadata information of the File.
In the context of exchanging Files, particular attention should be paid to the <code class="language-plaintext highlighter-rouge">reference.truncated</code> property of the File.
All Identities that know its value can download the encrypted content of the File from the Backbone and decrypt it.</p>

<h1 id="share-an-own-file-with-a-peer">Share an Own File With a Peer</h1>

<p>After <a href="#upload-a-file">uploading a File</a>, a certain kind of <a href="/integrate/data-model-overview#attributes">Attribute</a> can be used to share the value of the <code class="language-plaintext highlighter-rouge">reference.truncated</code> property of the <a href="/integrate/data-model-overview#file">File</a> with other Identities.
To be more precise, this is an <a href="/integrate/data-model-overview#identityattribute">IdentityAttribute</a> that has <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a> as its <code class="language-plaintext highlighter-rouge">value.@type</code>.
An IdentityFileReference stores the value of the <code class="language-plaintext highlighter-rouge">reference.truncated</code> property of the File within its <code class="language-plaintext highlighter-rouge">value</code> property.
By <a href="/integrate/share-attributes-with-peer#send-and-receive-the-request">sending a suitable Request</a>, this IdentityAttribute can be shared with a <code class="language-plaintext highlighter-rouge">peer</code> of an already existing <a href="/integrate/data-model-overview#relationship">Relationship</a> or in the process of <a href="/integrate/establish-relationships">establishing a Relationship</a>.
If the peer accepts the Request, a peer shared IdentityAttribute will be created for them and they will gain read access to the underlying File, that was <a href="#upload-a-file">uploaded to the Backbone</a>.
For the sender an own shared IdentityAttribute will be created.</p>

<div style="width: 640px; height: 480px; margin: 10px; position: relative;"><iframe allowfullscreen="" frameborder="0" style="width:640px; height:480px" src="https://lucid.app/documents/embedded/849a579c-15c6-4b9a-a652-ea51c31bb622" id="bJaM.8pgwNP3"></iframe></div>

<h2 id="create-an-identityfilereference">Create an IdentityFileReference</h2>

<p>After <a href="#upload-a-file">uploading the File</a>, an <a href="/integrate/data-model-overview#identityattribute">IdentityAttribute</a> with an <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a> as its <code class="language-plaintext highlighter-rouge">value.@type</code> and the <code class="language-plaintext highlighter-rouge">reference.truncated</code> of the uploaded <a href="/integrate/data-model-overview#file">File</a> as its <code class="language-plaintext highlighter-rouge">value.value</code> can be created by proceeding as described in the documentation on how to <a href="/integrate/create-attributes-for-yourself#create-an-identityattribute-for-yourself">create an IdentityAttribute for yourself</a>.
The following <code class="language-plaintext highlighter-rouge">content</code> can be used during the creation process, with its properties <code class="language-plaintext highlighter-rouge">validFrom</code>, <code class="language-plaintext highlighter-rouge">validTo</code> and <code class="language-plaintext highlighter-rouge">tags</code> being optional:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"validFrom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;start of IdentityFileReference's validity&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"validTo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;end of IdentityFileReference's validity&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityFileReference"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;truncated reference of File&gt;"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;tag of IdentityFileReference to be created&gt;"</span><span class="p">,</span><span class="w"> </span><span class="c1">...</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p class="notice--info">If an App user <a href="#upload-a-file">uploads a File</a>, such an <a href="/integrate/data-model-overview#identityattribute">IdentityAttribute</a> with an <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a> as its <code class="language-plaintext highlighter-rouge">value.@type</code> and the <code class="language-plaintext highlighter-rouge">reference.truncatedd</code> of the uploaded <a href="/integrate/data-model-overview#file">File</a> as its <code class="language-plaintext highlighter-rouge">value.value</code> is created automatically in the background.
For this reason, it is directly available to the App user for sharing.
Furthermore, knowledge of this automation in the App should motivate Integrators of Connectors to strive to <a href="/integrate/exchange-files-using-attributes">exchange Files using Attributes</a> in order to achieve File management compatibility between them and App users.</p>

<h2 id="share-an-identityfilereference">Share an IdentityFileReference</h2>

<p>After the <a href="/integrate/data-model-overview#identityattribute">IdentityAttribute</a> that has <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a> as its <code class="language-plaintext highlighter-rouge">value.@type</code> and the <code class="language-plaintext highlighter-rouge">reference.truncated</code> of the uploaded <a href="/integrate/data-model-overview#file">File</a> as its <code class="language-plaintext highlighter-rouge">value.value</code> has been created, the Integrator of the Connector must send a <a href="/integrate/share-attributes-with-peer#request-for-sharing-attributes">suitable Request</a> to share it.
More details on how to share <a href="/integrate/data-model-overview#attributes">Attributes</a> can be found in the <a href="/integrate/share-attributes-with-peer">Share Attributes with peer</a> scenario documentation.</p>

<h2 id="load-a-referenced-file">Load a Referenced File</h2>

<p>Once the shared <a href="/integrate/data-model-overview#identityattribute">IdentityAttribute</a> that has <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a> as its <code class="language-plaintext highlighter-rouge">value.@type</code> has been obtained, its recipient has knowledge of its <code class="language-plaintext highlighter-rouge">value.value</code> and thus also of the <code class="language-plaintext highlighter-rouge">reference.truncated</code> of the <a href="/integrate/data-model-overview#file">File</a> to be shared.
In order for the recipient to be authorized to <a href="/use-case-transport-download-file">download</a> the encrypted content of the File from the Backbone and decrypt it, they must first load the metadata information of the File.
This is done by executing the <a href="/use-case-transport-load-file">Load File</a> use case and specifying the <code class="language-plaintext highlighter-rouge">reference.truncated</code> of the File as the required <code class="language-plaintext highlighter-rouge">reference</code>.</p>

<p class="notice--info">Please note that it is also possible to store the <code class="language-plaintext highlighter-rouge">reference.truncated</code> of a <a href="/integrate/data-model-overview#token">Token</a> for the File within the <code class="language-plaintext highlighter-rouge">value.value</code> property of the <a href="/integrate/data-model-overview#identityattribute">IdentityAttribute</a> of <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a> <code class="language-plaintext highlighter-rouge">value.@type</code> instead of the <code class="language-plaintext highlighter-rouge">reference.truncated</code> of the <a href="/integrate/data-model-overview#file">File</a> itself.
In this case, the <a href="/use-case-transport-create-token-for-file">Token for the File must be created</a> beforehand.
The advantage of using Tokens is that they can be personalized or password protected.
When executing the <a href="/use-case-transport-load-file">Load File</a> use case, the <code class="language-plaintext highlighter-rouge">reference.truncated</code> of the Token can be specified as the <code class="language-plaintext highlighter-rouge">reference</code>.
If the Token is password protected, the <code class="language-plaintext highlighter-rouge">password</code> must additionally be entered for loading.</p>

<h1 id="further-options-for-exchanging-files">Further Options for Exchanging Files</h1>

<p>As for all other kinds of <a href="/integrate/data-model-overview#attributes">Attributes</a>, the <a href="/integrate/data-model-overview#identityattribute">IdentityAttributes</a> of <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a> <code class="language-plaintext highlighter-rouge">value.@type</code> can be <a href="/integrate/read-attributes-from-peer">read from a peer</a>, <a href="/integrate/create-attributes-for-peer">created for a peer</a> and <a href="/integrate/propose-attributes-to-peer">proposed to a peer</a> by proceeding as described in the corresponding scenario documentation.
In addition, there is the option of <a href="/integrate/update-attributes-by-succession">updating by succession</a> and <a href="/integrate/delete-attributes">deletion</a>.
However, the deletion of an IdentityAttribute that has IdentityFileReference as its <code class="language-plaintext highlighter-rouge">value.@type</code> does not additionally lead to the deletion of the associated uploaded encrypted content of the File on the Backbone.
This must be done separately if required.</p>

<h2 id="utilization-of-a-proprietaryfilereference">Utilization of a ProprietaryFileReference</h2>

<p>Furthermore, it is possible to represent <a href="#upload-a-file">uploaded Files</a> within a <a href="/integrate/data-model-overview#relationship">Relationship</a> utilizing a <a href="/integrate/data-model-overview#relationshipattribute">RelationshipAttribute</a> that has <a href="/integrate/attribute-values#proprietaryfilereference">ProprietaryFileReference</a> as its <code class="language-plaintext highlighter-rouge">value.@type</code> and the <code class="language-plaintext highlighter-rouge">reference.truncated</code> of the <a href="/integrate/data-model-overview#file">File</a> as <code class="language-plaintext highlighter-rouge">value.value</code>.
It is advantageous to use such a RelationshipAttribute instead of an IdentityAttribute of <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a> <code class="language-plaintext highlighter-rouge">value.@type</code> if the File fits more into the context of the Relationship and is less attributable to a single Identity.
An overview of the available options for <a href="/integrate/create-attributes-for-yourself#create-a-relationshipattribute">creating a RelationshipAttribute</a> can be found in the corresponding scenario documentation.</p>

<h1 id="transfer-the-ownership-of-a-file-to-a-peer">Transfer the Ownership of a File to a Peer</h1>

<p>If the sender creates a File for the recipient, simply <a href="#share-an-own-file-with-a-peer">sharing the File</a> will not be enough.
That is, because the uploaded File on the Backbone will still belong to the sender.
Instead, the ownership of the File needs to be transferred to the recipient.
To this end, firstly the sender needs to <a href="#upload-a-file">upload the File</a> to the Backbone.
Then, an appropriate <a href="/integrate/data-model-overview#transferfileownershiprequestitem">TransferFileOwnershipRequestItem</a> must be sent to the peer, who shall become the new owner of the File.
If they accept it, the ownership of the File on the Backbone will be transferred to them.
Additionally, a <a href="/integrate/data-model-overview#localattribute">RepositoryAttribute</a> will be created for the recipient, whose <code class="language-plaintext highlighter-rouge">content</code> is an <a href="/integrate/data-model-overview#identityattribute">IdentityAttribute</a> with <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a> as <code class="language-plaintext highlighter-rouge">value.@type</code>.
Moreover, this RepositoryAttribute will be shared with the sender, i.e. an own shared IdentityAttribute will be created for the recipient and a peer shared IdentityAttribute will be created for the sender.</p>

<h2 id="request-for-transferring-the-ownership-of-a-file">Request for Transferring the Ownership of a File</h2>

<p>The sender wants to transfer the ownership of a File to the recipient.
To do so, the sender must first create a suitable Request, which they can then send to the recipient.
In the following subsections, we describe the general appearance of a Request for transferring the ownership of a File.</p>

<p class="notice--info">To get a list of all Files that are owned by the sender, proceed as described in the <a href="/use-case-transport-query-metadata-of-own-files">Query metadata of own Files</a> use case documentation.</p>

<h3 id="role-of-transferfileownershiprequestitem">Role of TransferFileOwnershipRequestItem</h3>

<p>For transferring the ownership of a single File, the sender needs to insert a single RequestItem of type <a href="/integrate/data-model-overview#transferfileownershiprequestitem">TransferFileOwnershipRequestItem</a> into the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#request">Request</a>.
The sender can only transfer the ownership of a File that was already <a href="#upload-a-file">uploaded to the Backbone</a> and is owned by themselves.
The latter means that the <code class="language-plaintext highlighter-rouge">isOwn</code> property of the corresponding File is <code class="language-plaintext highlighter-rouge">true</code>.
To create the TransferFileOwnershipRequestItem, the value of <code class="language-plaintext highlighter-rouge">reference.truncated</code> of the File must be inserted into its <code class="language-plaintext highlighter-rouge">fileReference</code> property.
Furthermore, the <code class="language-plaintext highlighter-rouge">ownershipToken</code> of the File must be specified.</p>

<p class="notice--warning">If the File doesn’t have an <code class="language-plaintext highlighter-rouge">ownershipToken</code>, make sure that you are the owner.
If so, the reason is probably that the File is too old, such that no <code class="language-plaintext highlighter-rouge">ownershipToken</code> was generated upon its upload.
In this case, you can manually <a href="/use-case-transport-regenerate-file-ownership-token">regenerate the <code class="language-plaintext highlighter-rouge">ownershipToken</code> of the File</a>.</p>

<h3 id="example-of-transferring-the-ownership-of-a-file">Example of Transferring the Ownership of a File</h3>

<p>We assume that the Integrator of the sender has <a href="#upload-a-file">uploaded a File to the Backbone</a>, whose ownership they want to transfer to the recipient.
To do so, they need to insert the value of <code class="language-plaintext highlighter-rouge">reference.truncated</code> of the corresponding File into the <code class="language-plaintext highlighter-rouge">fileReference</code> property of the <a href="/integrate/data-model-overview#transferfileownershiprequestitem">TransferFileOwnershipRequestItem</a> and specify the <code class="language-plaintext highlighter-rouge">ownershipToken</code> of the File.
The value of the <code class="language-plaintext highlighter-rouge">mustBeAccepted</code> property is set to <code class="language-plaintext highlighter-rouge">true</code> in this example.
Then, the RequestItem needs to be put into the <code class="language-plaintext highlighter-rouge">item</code> property of the <a href="/integrate/data-model-overview#request">Request</a> for transferring the ownership of Files.</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Request"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TransferFileOwnershipRequestItem"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fileReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;truncated reference of the File&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ownershipToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;ownershipToken of the File&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="transfer-ownership-of-multiple-files">Transfer Ownership of Multiple Files</h3>

<p>Transferring the ownership is not limited to just a single File, but it is possible to request the transfer of ownership of multiple Files at the same time.
For this purpose, several TransferFileOwnershipRequestItems or suitable <a href="/integrate/data-model-overview#requestitemgroup">RequestItemGroups</a> can be inserted into the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#request">Request</a> for transferring the File ownership.
If you want to use a RequestItemGroup in order to transfer the ownership of multiple Files to the recipient at the same time, you must insert corresponding TranferFileOwnershipRequestItems into the <code class="language-plaintext highlighter-rouge">items</code> property of it.</p>

<h2 id="send-and-receive-the-request">Send and Receive the Request</h2>

<p>The sender that wants to transfer the ownership of a File may or may not already have a Relationship with the recipient.
Depending on which is the case, a different method can be used to send the <a href="#request-for-transferring-the-ownership-of-a-file">Request for transferring the ownership of a File</a>.
There are two ways to send the Request for transferring the ownership of a File to the recipient.</p>

<p class="notice--warning">Ensure that the Request for transferring the ownership of a File is only sent to one peer.
It must not be sent to multiple peers, since there can only be one owner for each File.
If the same Request was sent to multiple peers, once the first of them accepted it, the others would receive an error.</p>

<h3 id="request-via-relationshiptemplate">Request via RelationshipTemplate</h3>

<p>If there is currently no Relationship between the sender and the recipient, this approach must be used.
However, it is also possible for the sender to use a <a href="/integrate/data-model-overview#relationshiptemplate">RelationshipTemplate</a> to send a Request to the recipient if there is already an active Relationship between them.
All details on how to send and receive a Request via a RelationshipTemplate in general can be found in the <a href="/integrate/requests-via-relationshiptemplates">Requests via RelationshipTemplates</a> guide.</p>

<h3 id="request-via-message">Request via Message</h3>

<p>The sender only has the option of sending a Request to the recipient via a <a href="/integrate/data-model-overview#message">Message</a> if there is already an active Relationship between them.
All information on how to send and receive a Request via a Message can be found in the <a href="/integrate/requests-via-messages">Requests via Messages</a> guide.</p>

<h2 id="accept-the-request">Accept the Request</h2>

<p>After the recipient has received the <a href="#request-for-transferring-the-ownership-of-a-file">Request for transferring the ownership of Files</a>, they can accept it to receive the ownership of all or some of the sender’s Files.
To do this, proceed as described in the <a href="/use-case-consumption-accept-incoming-request">Accept incoming Request</a> use case documentation and specify the <code class="language-plaintext highlighter-rouge">id</code> of the received <a href="/integrate/data-model-overview#request">Request</a>.
Also, you need to decide and specify for each TransferFileOwnershipRequestItem contained in the Request for transferring the ownership of Files whether you want to accept or reject it.</p>

<p class="notice--info">If the recipient does not want to receive the ownership of any of the sender’s Files and, therefore, does not want to accept the Request for transferring the ownership of Files of the sender, they can reject it as a whole, too.
For that, follow the instructions of the <a href="/use-case-consumption-reject-incoming-request">Reject incoming Request</a> use case.</p>

<h3 id="accept-a-transferfileownershiprequestitem">Accept a TransferFileOwnershipRequestItem</h3>

<p>If the recipient agrees to receive the ownership of one of the sender’s Files, they can accept the associated TransferFileOwnershipRequestItem.
The <a href="/integrate/data-model-overview#acceptrequestitemparameters">AcceptRequestItemParameters</a> must be used for this.
The acceptance of a TransferFileOwnershipRequestItem leads to the transfer of the ownership of the File on the Backbone.
Thereby, the <code class="language-plaintext highlighter-rouge">ownershipToken</code> of the File is regenerated.
Additionally, a <a href="/integrate/data-model-overview#localattribute">RepositoryAttribute</a> will be created for the recipient, whose <code class="language-plaintext highlighter-rouge">content</code> is an <a href="/integrate/data-model-overview#identityattribute">IdentityAttribute</a> with <a href="/integrate/attribute-values#identityfilereference">IdentityFileReference</a> as <code class="language-plaintext highlighter-rouge">value.@type</code>.
The <code class="language-plaintext highlighter-rouge">value</code> of the IdentityFileReference is the value of <code class="language-plaintext highlighter-rouge">reference.truncated</code> of the File that is now owned by the recipient.
Also, if the File has any <code class="language-plaintext highlighter-rouge">tags</code>, they will become <code class="language-plaintext highlighter-rouge">tags</code> of the IdentityAttribute.
Moreover, the newly created RepositoryAttribute of the recipient will be shared with the sender, i.e. an own shared IdentityAttribute will be created for the recipient.
Based on this, an appropriate AcceptResponseItem of type <a href="/integrate/data-model-overview#transferfileownershipacceptresponseitem">TransferFileOwnershipAcceptResponseItem</a> is generated.
It contains the <code class="language-plaintext highlighter-rouge">id</code> and the <code class="language-plaintext highlighter-rouge">content</code> of the created own shared IdentityAttribute in its <code class="language-plaintext highlighter-rouge">attributeId</code> and <code class="language-plaintext highlighter-rouge">attribute</code> property, respectively.
This ResponseItem will appear within the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#response">Response</a> to the Request for transferring the ownership of Files, which will be sent back to the sender.</p>

<p class="notice--warning">In case no <code class="language-plaintext highlighter-rouge">ownershipToken</code> was specified in the TransferFileOwnershipRequestItem, the actual ownership of the File that was uploaded to the Backbone does not change.
Instead, accepting a TransferFileOwnershipRequestItem downloads the corresponding File and uploads it again to the Backbone, such that the recipient is its owner.
The created IdentityAttributes with <code class="language-plaintext highlighter-rouge">value.@type</code> IdentityFileReference references this newly uploaded File.
Consequently, after <a href="#receive-the-response-to-the-request">receiving the Response</a>, the File that was originally uploaded by the sender lost its meaning and can be <a href="/use-case-transport-delete-file">deleted</a>.
Due to this workaround, it is not recommended to send a TransferFileOwnershipRequestItem without specifying an <code class="language-plaintext highlighter-rouge">ownershipToken</code>.
Thus, in the next major version the <code class="language-plaintext highlighter-rouge">ownershipToken</code> will be a mandatory property of the TransferFileOwnershipRequestItem.</p>

<h3 id="reject-a-transferfileownershiprequestitem">Reject a TransferFileOwnershipRequestItem</h3>

<p>Even if the recipient accepts the Request for transferring the ownership of Files as a whole, it may decide not to accept the ownership of all of the sender’s Files.
To be more precise, the recipient has the option of rejecting <a href="/integrate/data-model-overview#transferfileownershiprequestitem">TransferFileOwnershipRequestItems</a> that have the value <code class="language-plaintext highlighter-rouge">false</code> specified in their <code class="language-plaintext highlighter-rouge">mustBeAccepted</code> property.
To reject a TransferFileOwnershipRequestItem, use the <a href="/integrate/data-model-overview#rejectrequestitemparameters">RejectRequestItemParameters</a>.
The rejection of a TransferFileOwnershipRequestItem leads to the creation of a corresponding ResponseItem of type <a href="/integrate/data-model-overview#rejectresponseitem">RejectResponseItem</a>.
This will be contained within the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#response">Response</a> to the Request for transferring the ownership of Files.</p>

<h2 id="receive-the-response-to-the-request">Receive the Response to the Request</h2>

<p>We now assume that the recipient has accepted the <a href="#request-for-transferring-the-ownership-of-a-file">Request for transferring the ownership of Files</a> of the sender.
In order for the sender to receive the Response of the recipient, they need to <a href="/use-case-transport-synchronize-updates-of-backbone">synchronize the updates of the Backbone</a>.
Please note that this synchronization can also be automated by using the <a href="/operate/modules#sync">Sync Module</a>.</p>

<p>To view the Response to the Request, proceed as described in the <a href="/use-case-consumption-query-outgoing-requests">Query outgoing Requests</a> use case documentation and use the following query parameter:</p>

<ul>
  <li>If the <a href="/integrate/share-attributes-with-peer#request-via-relationshiptemplate">Request was sent via a RelationshipTemplate</a>: Specify <code class="language-plaintext highlighter-rouge">&lt;ID of RelationshipTemplate&gt;</code> as the value for the <code class="language-plaintext highlighter-rouge">source.reference</code> query parameter.</li>
  <li>If the <a href="/integrate/share-attributes-with-peer#request-via-message">Request was sent via a Message</a>: Specify <code class="language-plaintext highlighter-rouge">&lt;ID of Request&gt;</code> as the value for the <code class="language-plaintext highlighter-rouge">id</code> query parameter.</li>
</ul>

<p>The Integrator of the sender can now get the Response of the recipient from the <code class="language-plaintext highlighter-rouge">response.content</code> property of the result.
In the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#response">Response</a> is a <a href="/integrate/data-model-overview#transferfileownershipacceptresponseitem">TransferFileOwnershipAcceptResponseItem</a> for each accepted TransferFileOwnershipRequestItem and a <a href="/integrate/data-model-overview#rejectresponseitem">RejectResponseItem</a> for each rejected TransferFileOwnershipRequestItem included.
Note that each accepted TransferFileOwnershipRequestItem leads to the creation of an appropriate <a href="/integrate/data-model-overview#localattribute">peer shared IdentityAttribute</a> of the sender.
The <code class="language-plaintext highlighter-rouge">content</code> and <code class="language-plaintext highlighter-rouge">id</code> of the LocalAttribute are the underlying <code class="language-plaintext highlighter-rouge">attribute</code> and <code class="language-plaintext highlighter-rouge">attributeId</code> of the TransferFileOwnershipAcceptResponseItem, respectively.</p>

<p class="notice--info">In case of an error, <a href="/integrate/data-model-overview#errorresponseitem">ErrorResponseItems</a> can also be included in the Response.
If the Request for transferring the ownership of Files contains a RequestItemGroup in its <code class="language-plaintext highlighter-rouge">items</code> property, the Response to this Request contains a corresponding <a href="/integrate/data-model-overview#responseitemgroup">ResponseItemGroup</a> in its <code class="language-plaintext highlighter-rouge">items</code> property.</p>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2025-06-12T11:58:55+02:00">June 12, 2025</time></p>

      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="footer-new">
    <div class="footer-row">
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">enmeshed</h5>
            <p class="footer-content">
                enmeshed is an open source wallet that ensures end-to-end encrypted digital data exchange between organizations and individuals.
                <br />
                <br />
                <small>enmeshed was developed by j&s-soft AG.</small>
            </p>
            <div class="footer-socials">
                <a class="footer-icon footer-social-icon footer-social-icon-twitter" href="https://twitter.com/enmeshed_jssoft" target="_blank">
                    <i class="fab fa-twitter"></i>
                </a>
                <a class="footer-icon footer-social-icon footer-social-icon-github" href="https://github.com/nmshd" target="_blank">
                    <i class="fab fa-github"></i>
                </a>
                <a class="footer-icon footer-social-icon footer-social-icon-linkedin" href="https://www.linkedin.com/showcase/enmeshed/" target="_blank">
                    <i class="fab fa-linkedin"></i>
                </a>
            </div>
        </div>
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">Contact</h5>
            <p class="footer-content">
                j&s-soft AG
                <br />
                Max-Jarecki-Straße 21
                <br />
                69115 Heidelberg
                <br />
                <br />
                <small
                    ><a href="tel:00496221431210"
                        ><span class="footer-contact-icon"><i aria-hidden="true" class="fas fa-phone-alt"></i></span>+49 (6221) 43121-0</a
                    ></small
                >
                <br />
                <small
                    ><a href="mailto:enmeshed.support@js-soft.com"
                        ><span class="footer-contact-icon"><i aria-hidden="true" class="fas fa-envelope"></i></span>enmeshed.support@js-soft.com</a
                    ></small
                >
            </p>
        </div>
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">Quick Links</h5>
            <ul class="footer-menu">
                   
                <li>
                    <a href="https://js-soft.com" rel="nofollow noopener noreferrer" target="_blank"> j&s-soft Website</a>
                </li>
                  
                <li>
                    <a href="https://www.enmeshed.de" rel="nofollow noopener noreferrer" target="_blank"> enmeshed Website</a>
                </li>
                  
                <li>
                    <a href="https://github.com/nmshd" rel="nofollow noopener noreferrer" target="_blank"> enmeshed on GitHub</a>
                </li>
                  
                <li>
                    <a href="/legal" rel="nofollow noopener noreferrer" target="_blank"> Legal Disclosure</a>
                </li>
                  
                <li>
                    <a href="/privacy" rel="nofollow noopener noreferrer" target="_blank"> Privacy Statement</a>
                </li>
                  
                <li>
                    <a href="https://www.npmjs.com/search?q=%40nmshd" rel="nofollow noopener noreferrer" target="_blank"> NPM</a>
                </li>
                  
                <li>
                    <a href="https://enmeshed.eu/feed.xml" rel="nofollow noopener noreferrer" target="_blank"> RSS Feed</a>
                </li>
                  
            </ul>
        </div>
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">Download the App</h5>
            <p class="footer-downloads footer-content">
                <a href="https://apps.apple.com/de/app/enmeshed/id1576693742" target="_blank">
                    <img src="/assets/images/appstore.svg" class="logo-app logo-app__appstore" />
                </a>
                <a href="https://play.google.com/store/apps/details?id=eu.enmeshed.app&hl=de&gl=US" target="_blank">
                    <img src="/assets/images/gplay.svg" class="logo-app logo-app__gplaystore" />
                </a>
            </p>
        </div>
    </div>
</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
