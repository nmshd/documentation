<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.1 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Integration example - enmeshed</title>
<meta name="description" content="In this tutorial we go through the basic steps necessary to establish a Relationship to another Identity and send Messages between two Identities with an existing Relationship. This will create a better understanding of these processes, which will help you automating them for your organization.">


  <meta name="author" content="enmeshed Team">
  
  <meta property="article:author" content="enmeshed Team">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="enmeshed">
<meta property="og:title" content="Integration example">
<meta property="og:url" content="/integrate/integration-example">


  <meta property="og:description" content="In this tutorial we go through the basic steps necessary to establish a Relationship to another Identity and send Messages between two Identities with an existing Relationship. This will create a better understanding of these processes, which will help you automating them for your organization.">







  <meta property="article:published_time" content="2025-05-06T13:13:53+02:00">






<link rel="canonical" href="/integrate/integration-example">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="enmeshed Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link href="/assets/css/overwrite.css" rel="stylesheet" type="text/css" />
<link href="/assets/css/enmeshed.css" rel="stylesheet" type="text/css" />

<!-- The following lines are needed because otherwise Prism (the syntax highlighter RapiDoc uses) breaks Rouge (the syntax highlighter we use) -->
<script>
    window.Prism = window.Prism || {};
    Prism.manual = true;
</script>
<script type="module" src="https://unpkg.com/rapidoc@9.2.0/dist/rapidoc-min.js"></script>



  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          enmeshed
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/use"
                
                
              >Use</a>
            </li><li class="masthead__menu-item">
              <a
                href="/explore"
                
                
              >Explore</a>
            </li><li class="masthead__menu-item">
              <a
                href="/integrate"
                
                
              >Integrate</a>
            </li><li class="masthead__menu-item">
              <a
                href="/operate"
                
                
              >Operate</a>
            </li><li class="masthead__menu-item">
              <a
                href="/contribute"
                
                
              >Contribute</a>
            </li><li class="masthead__menu-item">
              <a
                href="/blog"
                
                
              >Blog</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      <h3>Integrate enmeshed</h3>
      
      <nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      
      
        <li>
          
            <span class="nav__sub-title">Getting Started</span>
          

          
          <ul>
            
              <li><a href="/integrate/access-the-connector">Access the Connector</a></li>
            
              <li><a href="/integrate/integration-example" class="active">Integration example</a></li>
            
              <li><a href="/integrate/event-introduction">Event introduction</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Identities and Relationships</span>
          

          
          <ul>
            
              <li><a href="/integrate/establish-relationships">Establish Relationships</a></li>
            
              <li><a href="/integrate/exchange-messages">Exchange Messages</a></li>
            
              <li><a href="/integrate/terminate-relationships">Terminate Relationships</a></li>
            
              <li><a href="/integrate/delete-identities">Delete Identities</a></li>
            
              <li><a href="/integrate/manage-identitymetadata">Manage IdentityMetadata</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Working With Requests</span>
          

          
          <ul>
            
              <li><a href="/integrate/request-and-response-introduction">Request and Response introduction</a></li>
            
              <li><a href="/integrate/requests-via-relationshiptemplates">Requests via RelationshipTemplates</a></li>
            
              <li><a href="/integrate/requests-via-messages">Requests via Messages</a></li>
            
              <li><a href="/integrate/form-fields-within-requests">Form Fields Within Requests</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Manage Attributes</span>
          

          
          <ul>
            
              <li><a href="/integrate/attribute-introduction">Attribute introduction</a></li>
            
              <li><a href="/integrate/create-attributes-for-yourself">Create Attributes for yourself</a></li>
            
              <li><a href="/integrate/share-attributes-with-peer">Share Attributes with peer</a></li>
            
              <li><a href="/integrate/read-attributes-from-peer">Read Attributes from peer</a></li>
            
              <li><a href="/integrate/create-attributes-for-peer">Create Attributes for peer</a></li>
            
              <li><a href="/integrate/propose-attributes-to-peer">Propose Attributes to peer</a></li>
            
              <li><a href="/integrate/update-attributes-by-succession">Update Attributes by succession</a></li>
            
              <li><a href="/integrate/delete-attributes">Delete Attributes</a></li>
            
              <li><a href="/integrate/exchange-files-using-attributes">Exchange Files using Attributes</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Request Consent</span>
          

          
          <ul>
            
              <li><a href="/integrate/request-persistent-consent-of-peer">Request persistent consent of peer</a></li>
            
              <li><a href="/integrate/request-one-time-consent-of-peer">Request one-time consent of peer</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Data Model</span>
          

          
          <ul>
            
              <li><a href="/integrate/data-model-overview">Data Model Overview</a></li>
            
              <li><a href="/integrate/attribute-values">Attribute Values</a></li>
            
              <li><a href="/integrate/connector-events">Connector Events</a></li>
            
              <li><a href="/integrate/use-cases">Use Cases</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Migration Guides</span>
          

          
          <ul>
            
              <li><a href="/integrate/migration-from-v4-to-v5">Migration From v4 to v5</a></li>
            
              <li><a href="/integrate/migration-from-v5-to-v6">Migration From v5 to v6</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Troubleshooting</span>
          

          
          <ul>
            
              <li><a href="/integrate/error-codes">Error codes</a></li>
            
              <li><a href="/integrate/faq">FAQ</a></li>
            
              <li><a href="/integrate/support">Support</a></li>
            
          </ul>
          
        </li>
      
    
  </ul>
</nav>

    
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Integration example">
    <meta itemprop="description" content="In this tutorial we go through the basic steps necessary to establish a Relationship to another Identity and send Messages between two Identities with an existing Relationship.This will create a better understanding of these processes, which will help you automating them for your organization.">
    <meta itemprop="datePublished" content="2025-05-06T13:13:53+02:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="/integrate/integration-example" itemprop="url">Integration example
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#establishing-relationships">Establishing Relationships</a><ul><li><a href="#connector-create-an-attribute">Connector: Create an Attribute</a></li><li><a href="#connector-test-your-requests-validity">Connector: Test your Request’s Validity</a></li><li><a href="#connector-create-a-relationshiptemplate">Connector: Create a RelationshipTemplate</a></li><li><a href="#connector-create-a-qr-code-for-the-relationshiptemplate">Connector: Create a QR code for the RelationshipTemplate</a></li><li><a href="#app-initiate-a-relationship">App: Initiate a Relationship</a></li><li><a href="#connector-accept-the-relationship">Connector: Accept the Relationship</a></li></ul></li><li><a href="#sending-and-receiving-messages">Sending and Receiving Messages</a><ul><li><a href="#sending-a-message-with-a-connector">Sending a Message with a Connector</a></li><li><a href="#receiving-a-message-with-a-connector">Receiving a Message with a Connector</a></li></ul></li><li><a href="#whats-next">What’s next?</a></li></ul>
            </nav>
          </aside>
        
        <p>In this tutorial we go through the basic steps necessary to establish a <a href="/integrate/data-model-overview#relationship">Relationship</a> to another Identity and send <a href="/integrate/data-model-overview#message">Messages</a> between two Identities with an existing Relationship.
This will create a better understanding of these processes, which will help you automating them for your organization.</p>

<p>It is not mandatory to have an own Connector installed.
The following steps include small interactive pieces of the Connector’s API documentation that, when executed, fire Requests on a Connector we provide for testing purposes.</p>

<p>If you would like to use it, start by checking the health of the Connector:</p>

<p><br /></p>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^get /health$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<p>Nevertheless, you are welcome to use your own Connector, either with a REST client (e.g. Insomnia or Postman) or by using the RapiDoc documentation (/docs/rapidoc) hosted on your Connector.</p>

<p>The payloads for the Requests that are sent during this tutorial contain placeholders marked with <code class="language-plaintext highlighter-rouge">&lt;...&gt;</code>.
You need to replace them with values before you send the Requests.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>If you want to use your own Connector for executing the examples:
    <ul>
      <li><a href="https://enmeshed.eu/integrate/connector-installation">Install the Connector</a></li>
      <li>Make sure the <a href="/operate/modules#sync">Sync Module</a> and the <a href="/operate/modules#sse">Server-Sent Events Module</a> are disabled (because in this tutorial we will synchronize manually via the HTTP endpoint). We are also neither utilizing the <a href="/operate/modules#webhooks">Webhooks Module</a> nor the <a href="/operate/modules#messagebrokerpublisher">Message Broker Publisher Module</a>, even though using one of them is recommended in productive use.</li>
      <li>Make sure the <a href="/operate/configuration#corehttpapi">docs are enabled</a> for the documentation route to work</li>
      <li>Get the API key that was configured during installation of the Connector (it needs to be sent in the <code class="language-plaintext highlighter-rouge">X-API-KEY</code> header of every HTTP Request)</li>
    </ul>
  </li>
  <li>You need the <a href="/use/install-the-app">enmeshed App</a> with a minimum version of <code class="language-plaintext highlighter-rouge">4.0.0</code> installed on your mobile device.</li>
</ul>

<h2 id="establishing-relationships">Establishing Relationships</h2>

<p>In order to communicate with another Identity, a Relationship to that Identity is required.
Thus, in this first part of the tutorial you will learn how to establish a Relationship between your Connector and another Identity.
In this example the other Identity will be an App.
However, it could be another Connector, as well, e.g. if two companies want to exchange data securily without opening a port or network.</p>

<p>The way we will establish the Relationship is via a <a href="/integrate/data-model-overview#relationshiptemplate">RelationshipTemplate</a>.
This is created by the Connector and contains its display name, as well as the data it would like to receive from the other Identity.
Then, the App user fills out all required information of the RelationshipTemplate and sends a pending Relationship to the Connector.
It in turn accepts the Relationship, which results in an active Relationship.</p>

<h3 id="connector-create-an-attribute">Connector: Create an Attribute</h3>

<p>Firstly, let’s create a display name for our Connector.
While communicating with the other Identity in the subsequent steps, we will choose to share this display name.
Technically, for this we need to create an <a href="/integrate/data-model-overview#identityattribute">IdentityAttribute</a> with a value of type <a href="/integrate/attribute-values#displayname">DisplayName</a> for our Connector.
To do so, execute <code class="language-plaintext highlighter-rouge">POST /api/v2/Attributes</code> with the following payload:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DisplayName"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo Connector of integration example"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h6>Corresponding interactive API docs excerpt:</h6>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^post /api/v2/Attributes$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<table style="border: none" class="notice--warning">
    <tr>
        <td style="border: none"><i style="font-size: 2em" class="fas fa-fw fa-copy" /></td>
        <td style="border: none"><p>Save the <code class="language-plaintext highlighter-rouge">id</code> and the <code class="language-plaintext highlighter-rouge">owner</code> of the Attribute that you can find in the response. You will need it in the next step.</p>
</td>
    </tr>
</table>

<h3 id="connector-test-your-requests-validity">Connector: Test your Request’s Validity</h3>

<p>Next, we want to create a RelationshipTemplate, that can be used by the App to send a pending Relationship to our Connector.
The content of the RelationshipTemplate can be widely configured, but for simplicity we will use a <a href="/integrate/data-model-overview#request">Request</a> with just two <a href="/integrate/data-model-overview#requestitemgroup">RequestItemGroups</a> in our example.
On the one hand, we want to <a href="/integrate/share-attributes-with-peer">share an Attribute</a> with the App, namely the display name of our Connector we created in the previous step.
For this, we use a <a href="/integrate/data-model-overview#shareattributerequestitem">ShareAttributeRequestItem</a>.
On the other hand, we use <a href="/integrate/data-model-overview#readattributerequestitem">ReadAttributeRequestItems</a> to <a href="/integrate/read-attributes-from-peer">receive Attributes</a> from the App.
Let’s assume the Connector needs to know the given name and surname of its contact to create a Relationship and, additionally, offers the option to specify an email address for communication.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RequestItemGroup"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shared Attributes"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ShareAttributeRequestItem"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attribute"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityAttribute"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;the owner property of the Attribute created above&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DisplayName"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo Connector of integration example"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"sourceAttributeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;the ID of the Attribute created above&gt;"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RequestItemGroup"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Requested Attributes"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReadAttributeRequestItem"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityAttributeQuery"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GivenName"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReadAttributeRequestItem"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityAttributeQuery"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Surname"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReadAttributeRequestItem"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityAttributeQuery"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMailAddress"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Before we actually create the RelationshipTemplate, we want to ensure the validity of the Request and its items. To do so, execute <code class="language-plaintext highlighter-rouge">POST /api/v2/Requests/Outgoing/Validate</code> with the Request.</p>

<h6>Corresponding interactive API docs excerpt:</h6>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^post /api/v2/Requests/Outgoing/Validate$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<p class="notice--info">Even though the Requests are validated during the RelationshipTemplate creation, you should not skip this step, as it gives you additional information in case of validation errors.</p>

<h3 id="connector-create-a-relationshiptemplate">Connector: Create a RelationshipTemplate</h3>

<p>If the Connector states your Request as valid, we can create the RelationshipTemplate.
To do so, we use the <code class="language-plaintext highlighter-rouge">content</code> we just validated in <code class="language-plaintext highlighter-rouge">POST /api/v2/RelationshipTemplates/Own</code>.
Furthermore, we specify an expiration date, which is located in the future, and restrict the access to a single allocation.</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"maxNumberOfAllocations"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-12-31T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RelationshipTemplateContent"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Connector Demo Contact"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"onNewRelationship"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="c1">// &lt;the value of the 'content' property validated in the previous step&gt;</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h6>Corresponding interactive API docs excerpt:</h6>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^post /api/v2/RelationshipTemplates/Own$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<table style="border: none" class="notice--warning">
    <tr>
        <td style="border: none"><i style="font-size: 2em" class="fas fa-fw fa-copy" /></td>
        <td style="border: none"><p>Save the <code class="language-plaintext highlighter-rouge">id</code> of the RelationshipTemplate that you can find in the Response. You will need it in the next step.</p>
</td>
    </tr>
</table>

<h3 id="connector-create-a-qr-code-for-the-relationshiptemplate">Connector: Create a QR code for the RelationshipTemplate</h3>

<p>Now, to allow the App to retrieve the RelationshipTemplate, we create a QR code, that can be scanned by the App.
For this, execute the <code class="language-plaintext highlighter-rouge">GET /api/v2/RelationshipTemplates/{id}</code> route (Accept Header: <code class="language-plaintext highlighter-rouge">image/png</code>) and use the <code class="language-plaintext highlighter-rouge">id</code> of the RelationshipTemplate from the previous step as the value for <code class="language-plaintext highlighter-rouge">id</code>.</p>

<h6>Corresponding interactive API docs excerpt:</h6>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^get /api/v2/RelationshipTemplates/{id}$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<h3 id="app-initiate-a-relationship">App: Initiate a Relationship</h3>

<p>When the App is opened and no profile has been created yet, the user must create one. From the profile overview, the user can add a new contact using the “Add Contact” option. A QR code must be scanned to complete the process.</p>

<p>Scanning the QR code should result in a screen similar to the one below, where you can see the information that you added as <code class="language-plaintext highlighter-rouge">content</code> to the RelationshipTemplate.</p>

<p><img src="/assets/images/add-contact-screen.jpg" alt="Add contact screen" width="40%" /></p>

<p>Finally, fill out the required fields and click on “Add contact” to send the Relationship. This will initiate a Relationship between the App and the Connector. This Relationship has the status <code class="language-plaintext highlighter-rouge">Pending</code> for now.</p>

<h3 id="connector-accept-the-relationship">Connector: Accept the Relationship</h3>

<p>In order to move the Relationship into the <code class="language-plaintext highlighter-rouge">Active</code> state, we now need to <a href="/use-case-transport-accept-relationship">accept the Relationship</a> with the Connector.
To do so, we <a href="/use-case-transport-synchronize-updates-of-backbone">synchronize updates of the Backbone</a>, which will fetch all changes that occurred since the last time this endpoint was executed.</p>

<h6>Corresponding interactive API docs excerpt:</h6>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^post /api/v2/Account/Sync$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<p>The synchronization causes the <code class="language-plaintext highlighter-rouge">transport.relationshipChanged</code> <a href="/integrate/connector-events">Connector event</a> to be triggered, which should be listened to in order to get the Relationship in status <code class="language-plaintext highlighter-rouge">Pending</code>.
We can also <a href="/use-case-transport-query-relationships">get the Relationship</a> via <code class="language-plaintext highlighter-rouge">GET /api/v2/Relationships</code>. Should you be repeating this tutorial, you could e.g. filter by the <code class="language-plaintext highlighter-rouge">id</code> of the RelationshipTemplate from earlier via <code class="language-plaintext highlighter-rouge">GET /api/v2/Relationships?template.id=&lt;id&gt;</code> if you use a different RelationshipTemplate.</p>

<h6>Corresponding interactive API docs excerpt:</h6>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^get /api/v2/Relationships$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<p>Example:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RELmJj25x2bZW0VXzAiQ"</span><span class="p">,</span><span class="w">
      </span><span class="c1">...</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pending"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"peer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"did:e:_________________"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<table style="border: none" class="notice--warning">
    <tr>
        <td style="border: none"><i style="font-size: 2em" class="fas fa-fw fa-copy" /></td>
        <td style="border: none"><p>Save the <code class="language-plaintext highlighter-rouge">id</code> of the Relationship (<code class="language-plaintext highlighter-rouge">REL_________________</code>) and use it as input to the <code class="language-plaintext highlighter-rouge">PUT /api/v2/Relationships/{id}/Accept</code> route. You can leave that Request body as it is.</p>
</td>
    </tr>
</table>

<h6>Corresponding interactive API docs excerpt:</h6>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^put /api/v2/Relationships/{id}/Accept$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<p>Now the Relationship is in the <code class="language-plaintext highlighter-rouge">Active</code> state, so we can start to communicate with the opposite Identity, which we will do in the next part of this tutorial.
For this, we will need the <code class="language-plaintext highlighter-rouge">address</code> of that <a href="/integrate/data-model-overview#identity">Identity</a>.
It can be found in the Response, when accepting the Relationship.</p>

<table style="border: none" class="notice--warning">
    <tr>
        <td style="border: none"><i style="font-size: 2em" class="fas fa-fw fa-copy" /></td>
        <td style="border: none"><p>Save the <code class="language-plaintext highlighter-rouge">peer</code> property of the Response (<code class="language-plaintext highlighter-rouge">did:e:_________________</code>). You will need it in the next step.</p>
</td>
    </tr>
</table>

<h2 id="sending-and-receiving-messages">Sending and Receiving Messages</h2>

<p>After having established a Relationship with an Identity, we can start to exchange <a href="/integrate/data-model-overview#message">Messages</a>.
enmeshed defines different types of Messages.
In this tutorial we will focus on Messages of type <a href="/integrate/data-model-overview#mail">Mail</a>, which can be compared to a classic email: it is possible to specify one or more recipients, a subject and a body, as well as to add attachments.</p>

<h3 id="sending-a-message-with-a-connector">Sending a Message with a Connector</h3>

<p>Firstly, we will <a href="/integrate/exchange-messages">send a Message</a> from the Connector to the App.
For this, we need the address of our peer, that we copied in the previous step, and insert it in the fields <code class="language-plaintext highlighter-rouge">recipient</code> and <code class="language-plaintext highlighter-rouge">to</code>.
Further, the <code class="language-plaintext highlighter-rouge">subject</code> and <code class="language-plaintext highlighter-rouge">body</code> properties can be modified with some custom <code class="language-plaintext highlighter-rouge">content</code>.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"recipients"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"did:e:_________________________________"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mail"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"did:e:_________________________________"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Welcome"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello. We are pleased to welcome you as our customer."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h6>Corresponding interactive API docs excerpt:</h6>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^post /api/v2/Messages$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<p>After having sent the Message, you should receive a push notification on your phone.
Open the enmeshed App, navigate to “Contacts” and select the Relationship.
You should see the Message in the list.
Tapping on it reveals more details.</p>

<h3 id="receiving-a-message-with-a-connector">Receiving a Message with a Connector</h3>

<p>Next, we are going to send a Message from the App to the Connector.
So, open the enmeshed App, navigate to “Contacts” and select your Relationship.
Then, tap on “New Message”, enter a subject and body and tap on “Send”.</p>

<p>In order to fetch the Message, we need to synchronize the Connector with the Backbone again.</p>

<h6>Corresponding interactive API docs excerpt:</h6>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^post /api/v2/Account/Sync$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<p>After syncing, all Messages can be displayed with the <code class="language-plaintext highlighter-rouge">GET /api/v2/Messages</code> route. Additionally, the <a href="/integrate/connector-events">Event</a> <code class="language-plaintext highlighter-rouge">transport.messageReceived</code> is triggered after a Message is received. If you use the <a href="/operate/modules#messagebrokerpublisher">Message Broker Publisher Module</a> or the <a href="/operate/modules#webhooks">Webhooks Module</a> to subscribe to this event, you will receive the information whenever a new Message arrives.</p>

<h6>Corresponding interactive API docs excerpt:</h6>

<rapi-doc-mini server-url="https://doc-demo.is.enmeshed.eu/" default-api-server="https://doc-demo.is.enmeshed.eu/" api-key-name="x-api-key" api-key-location="header" api-key-value="apikey" layout="column" default-schema-tab="example" spec-url="https://doc-demo.is.enmeshed.eu/docs/json" paths-expanded="false" theme="light" bg-color="#f9f9fb" match-paths="^get /api/v2/Messages$" match-type="regex"></rapi-doc-mini>
<p><br /></p>

<p>The response should contain a Message with the <code class="language-plaintext highlighter-rouge">content</code> you entered in the App.</p>

<h2 id="whats-next">What’s next?</h2>

<p>Now that you have successfully established a Relationship and exchanged Messages, you can further explore the enmeshed API. You can for example:</p>

<ul>
  <li>explore the <a href="/integrate/data-model-overview">enmeshed data model</a> and learn more about the objects you used during this tutorial and the objects you will encounter in the future</li>
  <li>learn how to send <a href="/integrate/requests-via-messages">Requests via Messages</a> with your established Relationship</li>
  <li>dive deeper into creating and sending <a href="/integrate/requests-via-relationshiptemplates">Requests via RelationshipTemplates</a></li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2025-05-06T13:13:53+02:00">May 6, 2025</time></p>

      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="footer-new">
    <div class="footer-row">
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">enmeshed</h5>
            <p class="footer-content">
                enmeshed is an open source wallet that ensures end-to-end encrypted digital data exchange between organizations and individuals.
                <br />
                <br />
                <small>enmeshed was developed by j&s-soft AG.</small>
            </p>
            <div class="footer-socials">
                <a class="footer-icon footer-social-icon footer-social-icon-twitter" href="https://twitter.com/enmeshed_jssoft" target="_blank">
                    <i class="fab fa-twitter"></i>
                </a>
                <a class="footer-icon footer-social-icon footer-social-icon-github" href="https://github.com/nmshd" target="_blank">
                    <i class="fab fa-github"></i>
                </a>
                <a class="footer-icon footer-social-icon footer-social-icon-linkedin" href="https://www.linkedin.com/showcase/enmeshed/" target="_blank">
                    <i class="fab fa-linkedin"></i>
                </a>
            </div>
        </div>
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">Contact</h5>
            <p class="footer-content">
                j&s-soft AG
                <br />
                Max-Jarecki-Straße 21
                <br />
                69115 Heidelberg
                <br />
                <br />
                <small
                    ><a href="tel:00496221431210"
                        ><span class="footer-contact-icon"><i aria-hidden="true" class="fas fa-phone-alt"></i></span>+49 (6221) 43121-0</a
                    ></small
                >
                <br />
                <small
                    ><a href="mailto:enmeshed.support@js-soft.com"
                        ><span class="footer-contact-icon"><i aria-hidden="true" class="fas fa-envelope"></i></span>enmeshed.support@js-soft.com</a
                    ></small
                >
            </p>
        </div>
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">Quick Links</h5>
            <ul class="footer-menu">
                   
                <li>
                    <a href="https://js-soft.com" rel="nofollow noopener noreferrer" target="_blank"> j&s-soft Website</a>
                </li>
                  
                <li>
                    <a href="https://www.enmeshed.de" rel="nofollow noopener noreferrer" target="_blank"> enmeshed Website</a>
                </li>
                  
                <li>
                    <a href="https://github.com/nmshd" rel="nofollow noopener noreferrer" target="_blank"> enmeshed on GitHub</a>
                </li>
                  
                <li>
                    <a href="/legal" rel="nofollow noopener noreferrer" target="_blank"> Legal Disclosure</a>
                </li>
                  
                <li>
                    <a href="/privacy" rel="nofollow noopener noreferrer" target="_blank"> Privacy Statement</a>
                </li>
                  
                <li>
                    <a href="https://www.npmjs.com/search?q=%40nmshd" rel="nofollow noopener noreferrer" target="_blank"> NPM</a>
                </li>
                  
                <li>
                    <a href="https://enmeshed.eu/feed.xml" rel="nofollow noopener noreferrer" target="_blank"> RSS Feed</a>
                </li>
                  
            </ul>
        </div>
        <div class="footer-col footer-col-25">
            <h5 class="footer-headline">Download the App</h5>
            <p class="footer-downloads footer-content">
                <a href="https://apps.apple.com/de/app/enmeshed/id1576693742" target="_blank">
                    <img src="/assets/images/appstore.svg" class="logo-app logo-app__appstore" />
                </a>
                <a href="https://play.google.com/store/apps/details?id=eu.enmeshed.app&hl=de&gl=US" target="_blank">
                    <img src="/assets/images/gplay.svg" class="logo-app logo-app__gplaystore" />
                </a>
            </p>
        </div>
    </div>
</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
