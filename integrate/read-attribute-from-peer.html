<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Read Attribute from peer - enmeshed</title>
<meta name="description" content="There are many situations in which an Identity is interested in an IdentityAttribute or a RelationshipAttribute of another Identity, for example:     A company must know the age of a customer in order to carry out an age check if they want to purchase alcohol or other age-restricted goods.   A company needs the street address of a customer so that it can send them an invoice after the customer has made a purchase from the company.   An organization is interested in the birth date of a member so that it can wish them a happy birthday every year.   A university needs to know the email address of a student in order to be able to send them emails.   In this guide, we explain how a Connector, hereinafter referred to as the Sender, can read an Attribute of another Connector, the so-called Recipient. Since understanding this reading process requires knowledge about Requests and how to use them in general, you should take a look at our Request and Response introduction before continuing reading this guide.  Please note that the general procedure is the same if the Connector wants to read an Attribute of an App user instead of another Connector. For reasons of clarity, this guide focuses on the reading process with two Connectors.  Request for reading Attributes  The Sender wants to read an Attribute of the Recipient. To do this, the Sender must first create a suitable Request, which it can then send to the Recipient. In the following subsections, we describe the general appearance of a Request for reading Attributes.  Role of ReadAttributeRequestItem  For reading a single Attribute, the Sender needs to insert a single RequestItem of type ReadAttributeRequestItem into the items property of the Request. The input it has to provide for the query property of the ReadAttributeRequestItem depends on what type of Attribute it wants to get. If the Sender wants to read an IdentityAttribute, it can use an appropriate IdentityAttributeQuery. If it is interested in a RelationshipAttribute of the Recipient, it can insert a RelationshipAttributeQuery or a ThirdPartyRelationshipAttributeQuery at this point. This depends on whether the Sender wants to read a RelationshipAttribute that the Recipient has in the context of a Relationship with the Sender or with a third party. It is also permitted to specify an IQLQuery for the query property of the ReadAttributeRequestItem.  Combinations and usage scenarios of ReadAttributeRequestItem  The following table provides an overview of the possible kinds of Attributes that the Sender can read from the Recipient using the ReadAttributeRequestItem. It must be taken into account whether the Attribute is an IdentityAttribute or a RelationshipAttribute and which Identity is its owner. If the Sender wants to read a RelationshipAttribute from the Recipient, a distinction must be made between which Identities the Relationship in question exists.                 Attribute Type       Attribute Owner       Third Party       Possible?       Automation       Examples/Reason                       Identity       Sender               ✗       N/A       It makes no sense to read own IdentityAttributes.                 Identity       Recipient               ✓       USER_DECISION       Company asks customer for its delivery address.                 Relationship       Sender               ✓       USER_DECISION       With this combination the Sender gives the Recipient the one-time permission to write a RelationshipAttribute once.Example: Electricity provider asks new customers for electricity meter number.                 Relationship       Recipient               ✓       USER_DECISION       With this combination the Sender asks the Recipient for the one-time permission to write a RelationshipAttribute.Example: Company asks new customer to subscribe to the newsletter.                 Relationship       Recipient       Third Party       ✓       USER DECISION / NOT ALLOWED - depending on confidentiality       With this combination the Sender requests a RelationshipAttribute from a Relationship between the Recipient and a third party that is owned by the Recipient. Example: A social network asks for Facebook privacy settings of a user to get senseful defaults of its own privacy settings.                 Relationship       Third Party       Third Party       ✓       USER DECISION / NOT ALLOWED - depending on confidentiality       With this combination the Sender requests a RelationshipAttribute from a Relationship between the Recipient and a third party that is owned by the third party. Example: An online shop asks for the Payback customer ID of a user to book the order on their account.           Example of reading an IdentityAttribute  We assume that the Sender wants to read an IdentityAttribute of type EMailAddress of the Recipient. To do this, it inserts the corresponding IdentityAttributeQuery into the query property of the ReadAttributeRequestItem, which is contained within the items property of the Request for reading Attributes. In our example, we have chosen to set the value of the mustBeAccepted property of the ReadAttributeRequestItem to true.  {   &quot;@type&quot;: &quot;Request&quot;,   &quot;items&quot;: [     {       &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,       &quot;mustBeAccepted&quot;: true,       &quot;query&quot;: {         &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,         &quot;valueType&quot;: &quot;EMailAddress&quot;       }     }   ] }   Example of reading a RelationshipAttribute  We now consider the case that the Sender has an active Relationship established with the Recipient and that the Sender wants to request a RelationshipAttribute of this Relationship whose value is set by the Recipient. Then the associated ReadAttributeRequestItem, which is contained in the items property of the Request for reading Attributes created by the Sender, must contain an appropriate RelationshipAttributeQuery in its query property. For example, if the Sender wants to request a RelationshipAttribute of type ProprietaryString that is owned by the Recipient and whose confidentiality is &quot;public&quot;, the Request could look like this:  {   &quot;@type&quot;: &quot;Request&quot;,   &quot;items&quot;: [     {       &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,       &quot;mustBeAccepted&quot;: true,       &quot;query&quot;: {         &quot;@type&quot;: &quot;RelationshipAttributeQuery&quot;,         &quot;key&quot;: &quot;&lt;key of RelationshipAttribute&gt;&quot;,         &quot;owner&quot;: &quot;&lt;Address of Recipient&gt;&quot;,         &quot;attributeCreationHints&quot;: {           &quot;title&quot;: &quot;&lt;title of RelationshipAttribute&gt;&quot;,           &quot;valueType&quot;: &quot;ProprietaryString&quot;,           &quot;confidentiality&quot;: &quot;public&quot;         }       }     }   ] }   Note that the &lt;...&gt; notation is used as a placeholder for the actual data as usual. Further details on the purposes for which you can use a RelationshipAttributeQuery can be found in the table of the Combinations and usage scenarios of the ReadAttributeRequestItem. For information on using the ThirdPartyRelationshipAttributeQuery, you should also refer to this table.  Read multiple Attributes  Requesting read access is not limited to just a single Attribute, but it is possible to request read access to multiple Attributes at the same time. Several ReadAttributeRequestItems or suitable RequestItemGroups can be inserted into the items property of the Request for reading Attributes for this purpose. If you want to use a RequestItemGroup in order to request read access to multiple Attributes of the Recipient at the same time, you must insert corresponding ReadAttributeRequestItems into the items property of it.  Send and receive the Request  The Sender that wants to read an Attribute of the Recipient may or may not already have a Relationship with the Recipient. Depending on which is the case, a different method can be used to send the Request for reading Attributes. There are two ways to send the Request for reading Attributes created by the Sender to the Recipient.  Request over Template  If there is currently no Relationship between the Sender and the Recipient, this approach must be used. But it is also possible for the Sender to use a RelationshipTemplate to send a Request to the Recipient if there is already an active Relationship between them. All details on how to send and receive a Request via a RelationshipTemplate in general can be found in the Requests over Templates guide.  Request over Message  The Sender only has the option of sending a Request to the Recipient via a Message if there is already an active Relationship between them. All information on how to send and receive a Request via a Message can be found in the Requests over Messages guide.  Accept the Request  After the Recipient has received the Request for reading Attributes, it can accept it to give the Sender read access to all or some of the requested Attributes. To do this, proceed as described in the Accept incoming Request use case documentation and specify the id of the received Request. You must also decide and specify for each ReadAttributeRequestItem and RequestItemGroup contained in the Request for reading Attributes whether you want to accept or reject it.  If the Recipient does not want the Sender to read any of its Attributes and, therefore, does not want to accept the Request for reading Attributes of the Sender, it can reject it as a whole as well. For this, follow the instructions of the Reject incoming Request use case.    Accept a ReadAttributeRequestItem  If the Recipient agrees to share a requested Attribute with the Sender, it can accept the associated ReadAttributeRequestItem contained in the Request for reading Attributes. In particular, it must then provide the requested Attribute for its Response to the Request. Depending on whether the Recipient wants to share an Attribute that already exists as a LocalAttribute or that has to be created first, different parameters for this must be used. These AcceptReadAttributeRequestItemParameters are described in the corresponding section of the Data Model Overview. The acceptance of a ReadAttributeRequestItem always leads to the creation of a LocalAttribute with a LocalAttributeShareInfo contained within its shareInfo property, whose underlying content is given by the shared Attribute. An appropriate AcceptResponseItem of type ReadAttributeAcceptResponseItem is generated, which incorporates the id of the LocalAttribute with the LocalAttributeShareInfo in its attributeId property and the shared Attribute in its attribute property. This ReadAttributeAcceptResponseItem will be included in the items property of the Response to the Request for reading Attributes that will be transferred to the Sender. If a new IdentityAttribute is to be shared, a corresponding LocalAttribute without a LocalAttributeShareInfo is additionally created for the Recipient beforehand.  Reject a ReadAttributeRequestItem  Even if the Recipient accepts the Request for reading Attributes as a whole, it may decide not to share every requested Attribute with the Sender. To be more precise, the Recipient has the option of rejecting ReadAttributeRequestItems that have the value false specified in their mustBeAccepted property. To reject a ReadAttributeRequestItem, use the RejectRequestItemParameters. The rejection of a ReadAttributeRequestItem leads to the creation of a ResponseItem of type RejectResponseItem. This will be contained within the items property of the Response to the Request for reading Attributes.  Example of accepting a RequestItemGroup  Let’s look at an example where the Sender is interested in the Recipient’s BirthDate and contact information in the form of an EMailAddress or a PhoneNumber. To ask the Recipient for this data, the Sender creates a Request for reading Attributes, which contains a ReadAttributeRequestItem belonging to the BirthDate and a RequestItemGroup belonging to the contact information in its items property. The RequestItemGroup itself contains two ReadAttributeRequestItems in its items property, namely one for the EMailAddress and one for the PhoneNumber.  {   &quot;@type&quot;: &quot;Request&quot;,   &quot;items&quot;: [     {       &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,       &quot;mustBeAccepted&quot;: false,       &quot;query&quot;: {         &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,         &quot;valueType&quot;: &quot;BirthDate&quot;       }     },     {       &quot;@type&quot;: &quot;RequestItemGroup&quot;,       &quot;mustBeAccepted&quot;: true,       &quot;items&quot;: [         {           &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,           &quot;mustBeAccepted&quot;: true,           &quot;query&quot;: {             &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,             &quot;valueType&quot;: &quot;EMailAddress&quot;           }         },         {           &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,           &quot;mustBeAccepted&quot;: false,           &quot;query&quot;: {             &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,             &quot;valueType&quot;: &quot;PhoneNumber&quot;           }         }       ]     }   ] }   In our example, the Sender only requires the Recipient to share its EMailAddress, which is why the individual ReadAttributeRequestItems and the RequestItemGroup within the Request have specified corresponding values in their mustBeAccepted property. We assume that the Recipient wants to accept the Request and only wants to share its EMailAddress, which is already saved as an appropriate LocalAttribute, with the Sender.  If the Recipient wants to accept the Request for reading Attributes, it must accept all ReadAttributeRequestItems for which the mustBeAccepted property is set to true. It is therefore not permitted, for example, for the Recipient to refuse to share its EMailAddress and instead share its PhoneNumber.  The Recipient refuses to share its BirthDate with the Sender and accepts at least one ReadAttributeRequestItem of the RequestItemGroup. Also, the Recipient accepts the sharing of its EMailAddress and rejects the sharing of its PhoneNumber. Thus, it responds to the Request for reading Attributes as follows:  {   &quot;items&quot;: [     {       // Reject sharing of BirthDate       &quot;accept&quot;: false     },     {       // Accept RequestItemGroup       &quot;accept&quot;: true,       &quot;items&quot;: [         {           // Accept sharing of existing EMailAddress           &quot;accept&quot;: true,           &quot;existingAttributeId&quot;: &quot;&lt;ID of LocalAttribute of EMailAddress&gt;&quot;         },         {           // Reject sharing of PhoneNumber           &quot;accept&quot;: false         }       ]     }   ] }   Note that it is important to respond to RequestItems and RequestItemGroups in the same order in which they were received.  Get the Attributes  We now assume that the Recipient has accepted the Request for reading Attributes of the Sender. In order for the Sender to receive the Response of the Recipient, it needs to synchronize the updates of the Backbone. Please note that this synchronization can also be automated by using the Sync Module.    To view the Response to the Request, search for it in the synchronization result or proceed as described in the Query outgoing Requests use case documentation and use the following query parameter:     If the Request was sent via a Template: Specify &lt;ID of RelationshipTemplate&gt; as the value for the source.reference query parameter.   If the Request was sent via a Message: Specify &lt;ID of Request&gt; as the value for the id query parameter.   The Integrator of the Sender can now get the Response of the Recipient from the response.content property of the result. In particular, each requested and shared Attribute that belongs to an accepted ReadAttributeRequestItem can be read from a corresponding ReadAttributeAcceptResponseItem within the items property of the Response. Internally, the shared attribute that can be read from the ReadAttributeAcceptResponseItem is used to create an appropriate LocalAttribute with a LocalAttributeShareInfo of the Sender. On the other hand, there is a corresponding RejectResponseItem in the items property of the Response for each rejected ReadAttributeRequestItem.  In case of an error, ErrorResponseItems can also be included in the Response. If the Request for reading Attributes contains a RequestItemGroup in its items property, the Response to this Request contains a corresponding ResponseItemGroup in its items property.  What’s next?  Take a look at our Integration example if you want to see how an Attribute of a peer is read by an Identity in the context of a larger process. Also note that it is not only possible to request the reading of an Attribute from a peer, but that you can share your own Attribute with a peer as well. Consult the Share own Attribute to peer guide for this.">


  <meta name="author" content="Enmeshed Team">
  
  <meta property="article:author" content="Enmeshed Team">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="enmeshed">
<meta property="og:title" content="Read Attribute from peer">
<meta property="og:url" content="/integrate/read-attribute-from-peer">


  <meta property="og:description" content="There are many situations in which an Identity is interested in an IdentityAttribute or a RelationshipAttribute of another Identity, for example:     A company must know the age of a customer in order to carry out an age check if they want to purchase alcohol or other age-restricted goods.   A company needs the street address of a customer so that it can send them an invoice after the customer has made a purchase from the company.   An organization is interested in the birth date of a member so that it can wish them a happy birthday every year.   A university needs to know the email address of a student in order to be able to send them emails.   In this guide, we explain how a Connector, hereinafter referred to as the Sender, can read an Attribute of another Connector, the so-called Recipient. Since understanding this reading process requires knowledge about Requests and how to use them in general, you should take a look at our Request and Response introduction before continuing reading this guide.  Please note that the general procedure is the same if the Connector wants to read an Attribute of an App user instead of another Connector. For reasons of clarity, this guide focuses on the reading process with two Connectors.  Request for reading Attributes  The Sender wants to read an Attribute of the Recipient. To do this, the Sender must first create a suitable Request, which it can then send to the Recipient. In the following subsections, we describe the general appearance of a Request for reading Attributes.  Role of ReadAttributeRequestItem  For reading a single Attribute, the Sender needs to insert a single RequestItem of type ReadAttributeRequestItem into the items property of the Request. The input it has to provide for the query property of the ReadAttributeRequestItem depends on what type of Attribute it wants to get. If the Sender wants to read an IdentityAttribute, it can use an appropriate IdentityAttributeQuery. If it is interested in a RelationshipAttribute of the Recipient, it can insert a RelationshipAttributeQuery or a ThirdPartyRelationshipAttributeQuery at this point. This depends on whether the Sender wants to read a RelationshipAttribute that the Recipient has in the context of a Relationship with the Sender or with a third party. It is also permitted to specify an IQLQuery for the query property of the ReadAttributeRequestItem.  Combinations and usage scenarios of ReadAttributeRequestItem  The following table provides an overview of the possible kinds of Attributes that the Sender can read from the Recipient using the ReadAttributeRequestItem. It must be taken into account whether the Attribute is an IdentityAttribute or a RelationshipAttribute and which Identity is its owner. If the Sender wants to read a RelationshipAttribute from the Recipient, a distinction must be made between which Identities the Relationship in question exists.                 Attribute Type       Attribute Owner       Third Party       Possible?       Automation       Examples/Reason                       Identity       Sender               ✗       N/A       It makes no sense to read own IdentityAttributes.                 Identity       Recipient               ✓       USER_DECISION       Company asks customer for its delivery address.                 Relationship       Sender               ✓       USER_DECISION       With this combination the Sender gives the Recipient the one-time permission to write a RelationshipAttribute once.Example: Electricity provider asks new customers for electricity meter number.                 Relationship       Recipient               ✓       USER_DECISION       With this combination the Sender asks the Recipient for the one-time permission to write a RelationshipAttribute.Example: Company asks new customer to subscribe to the newsletter.                 Relationship       Recipient       Third Party       ✓       USER DECISION / NOT ALLOWED - depending on confidentiality       With this combination the Sender requests a RelationshipAttribute from a Relationship between the Recipient and a third party that is owned by the Recipient. Example: A social network asks for Facebook privacy settings of a user to get senseful defaults of its own privacy settings.                 Relationship       Third Party       Third Party       ✓       USER DECISION / NOT ALLOWED - depending on confidentiality       With this combination the Sender requests a RelationshipAttribute from a Relationship between the Recipient and a third party that is owned by the third party. Example: An online shop asks for the Payback customer ID of a user to book the order on their account.           Example of reading an IdentityAttribute  We assume that the Sender wants to read an IdentityAttribute of type EMailAddress of the Recipient. To do this, it inserts the corresponding IdentityAttributeQuery into the query property of the ReadAttributeRequestItem, which is contained within the items property of the Request for reading Attributes. In our example, we have chosen to set the value of the mustBeAccepted property of the ReadAttributeRequestItem to true.  {   &quot;@type&quot;: &quot;Request&quot;,   &quot;items&quot;: [     {       &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,       &quot;mustBeAccepted&quot;: true,       &quot;query&quot;: {         &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,         &quot;valueType&quot;: &quot;EMailAddress&quot;       }     }   ] }   Example of reading a RelationshipAttribute  We now consider the case that the Sender has an active Relationship established with the Recipient and that the Sender wants to request a RelationshipAttribute of this Relationship whose value is set by the Recipient. Then the associated ReadAttributeRequestItem, which is contained in the items property of the Request for reading Attributes created by the Sender, must contain an appropriate RelationshipAttributeQuery in its query property. For example, if the Sender wants to request a RelationshipAttribute of type ProprietaryString that is owned by the Recipient and whose confidentiality is &quot;public&quot;, the Request could look like this:  {   &quot;@type&quot;: &quot;Request&quot;,   &quot;items&quot;: [     {       &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,       &quot;mustBeAccepted&quot;: true,       &quot;query&quot;: {         &quot;@type&quot;: &quot;RelationshipAttributeQuery&quot;,         &quot;key&quot;: &quot;&lt;key of RelationshipAttribute&gt;&quot;,         &quot;owner&quot;: &quot;&lt;Address of Recipient&gt;&quot;,         &quot;attributeCreationHints&quot;: {           &quot;title&quot;: &quot;&lt;title of RelationshipAttribute&gt;&quot;,           &quot;valueType&quot;: &quot;ProprietaryString&quot;,           &quot;confidentiality&quot;: &quot;public&quot;         }       }     }   ] }   Note that the &lt;...&gt; notation is used as a placeholder for the actual data as usual. Further details on the purposes for which you can use a RelationshipAttributeQuery can be found in the table of the Combinations and usage scenarios of the ReadAttributeRequestItem. For information on using the ThirdPartyRelationshipAttributeQuery, you should also refer to this table.  Read multiple Attributes  Requesting read access is not limited to just a single Attribute, but it is possible to request read access to multiple Attributes at the same time. Several ReadAttributeRequestItems or suitable RequestItemGroups can be inserted into the items property of the Request for reading Attributes for this purpose. If you want to use a RequestItemGroup in order to request read access to multiple Attributes of the Recipient at the same time, you must insert corresponding ReadAttributeRequestItems into the items property of it.  Send and receive the Request  The Sender that wants to read an Attribute of the Recipient may or may not already have a Relationship with the Recipient. Depending on which is the case, a different method can be used to send the Request for reading Attributes. There are two ways to send the Request for reading Attributes created by the Sender to the Recipient.  Request over Template  If there is currently no Relationship between the Sender and the Recipient, this approach must be used. But it is also possible for the Sender to use a RelationshipTemplate to send a Request to the Recipient if there is already an active Relationship between them. All details on how to send and receive a Request via a RelationshipTemplate in general can be found in the Requests over Templates guide.  Request over Message  The Sender only has the option of sending a Request to the Recipient via a Message if there is already an active Relationship between them. All information on how to send and receive a Request via a Message can be found in the Requests over Messages guide.  Accept the Request  After the Recipient has received the Request for reading Attributes, it can accept it to give the Sender read access to all or some of the requested Attributes. To do this, proceed as described in the Accept incoming Request use case documentation and specify the id of the received Request. You must also decide and specify for each ReadAttributeRequestItem and RequestItemGroup contained in the Request for reading Attributes whether you want to accept or reject it.  If the Recipient does not want the Sender to read any of its Attributes and, therefore, does not want to accept the Request for reading Attributes of the Sender, it can reject it as a whole as well. For this, follow the instructions of the Reject incoming Request use case.    Accept a ReadAttributeRequestItem  If the Recipient agrees to share a requested Attribute with the Sender, it can accept the associated ReadAttributeRequestItem contained in the Request for reading Attributes. In particular, it must then provide the requested Attribute for its Response to the Request. Depending on whether the Recipient wants to share an Attribute that already exists as a LocalAttribute or that has to be created first, different parameters for this must be used. These AcceptReadAttributeRequestItemParameters are described in the corresponding section of the Data Model Overview. The acceptance of a ReadAttributeRequestItem always leads to the creation of a LocalAttribute with a LocalAttributeShareInfo contained within its shareInfo property, whose underlying content is given by the shared Attribute. An appropriate AcceptResponseItem of type ReadAttributeAcceptResponseItem is generated, which incorporates the id of the LocalAttribute with the LocalAttributeShareInfo in its attributeId property and the shared Attribute in its attribute property. This ReadAttributeAcceptResponseItem will be included in the items property of the Response to the Request for reading Attributes that will be transferred to the Sender. If a new IdentityAttribute is to be shared, a corresponding LocalAttribute without a LocalAttributeShareInfo is additionally created for the Recipient beforehand.  Reject a ReadAttributeRequestItem  Even if the Recipient accepts the Request for reading Attributes as a whole, it may decide not to share every requested Attribute with the Sender. To be more precise, the Recipient has the option of rejecting ReadAttributeRequestItems that have the value false specified in their mustBeAccepted property. To reject a ReadAttributeRequestItem, use the RejectRequestItemParameters. The rejection of a ReadAttributeRequestItem leads to the creation of a ResponseItem of type RejectResponseItem. This will be contained within the items property of the Response to the Request for reading Attributes.  Example of accepting a RequestItemGroup  Let’s look at an example where the Sender is interested in the Recipient’s BirthDate and contact information in the form of an EMailAddress or a PhoneNumber. To ask the Recipient for this data, the Sender creates a Request for reading Attributes, which contains a ReadAttributeRequestItem belonging to the BirthDate and a RequestItemGroup belonging to the contact information in its items property. The RequestItemGroup itself contains two ReadAttributeRequestItems in its items property, namely one for the EMailAddress and one for the PhoneNumber.  {   &quot;@type&quot;: &quot;Request&quot;,   &quot;items&quot;: [     {       &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,       &quot;mustBeAccepted&quot;: false,       &quot;query&quot;: {         &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,         &quot;valueType&quot;: &quot;BirthDate&quot;       }     },     {       &quot;@type&quot;: &quot;RequestItemGroup&quot;,       &quot;mustBeAccepted&quot;: true,       &quot;items&quot;: [         {           &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,           &quot;mustBeAccepted&quot;: true,           &quot;query&quot;: {             &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,             &quot;valueType&quot;: &quot;EMailAddress&quot;           }         },         {           &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,           &quot;mustBeAccepted&quot;: false,           &quot;query&quot;: {             &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,             &quot;valueType&quot;: &quot;PhoneNumber&quot;           }         }       ]     }   ] }   In our example, the Sender only requires the Recipient to share its EMailAddress, which is why the individual ReadAttributeRequestItems and the RequestItemGroup within the Request have specified corresponding values in their mustBeAccepted property. We assume that the Recipient wants to accept the Request and only wants to share its EMailAddress, which is already saved as an appropriate LocalAttribute, with the Sender.  If the Recipient wants to accept the Request for reading Attributes, it must accept all ReadAttributeRequestItems for which the mustBeAccepted property is set to true. It is therefore not permitted, for example, for the Recipient to refuse to share its EMailAddress and instead share its PhoneNumber.  The Recipient refuses to share its BirthDate with the Sender and accepts at least one ReadAttributeRequestItem of the RequestItemGroup. Also, the Recipient accepts the sharing of its EMailAddress and rejects the sharing of its PhoneNumber. Thus, it responds to the Request for reading Attributes as follows:  {   &quot;items&quot;: [     {       // Reject sharing of BirthDate       &quot;accept&quot;: false     },     {       // Accept RequestItemGroup       &quot;accept&quot;: true,       &quot;items&quot;: [         {           // Accept sharing of existing EMailAddress           &quot;accept&quot;: true,           &quot;existingAttributeId&quot;: &quot;&lt;ID of LocalAttribute of EMailAddress&gt;&quot;         },         {           // Reject sharing of PhoneNumber           &quot;accept&quot;: false         }       ]     }   ] }   Note that it is important to respond to RequestItems and RequestItemGroups in the same order in which they were received.  Get the Attributes  We now assume that the Recipient has accepted the Request for reading Attributes of the Sender. In order for the Sender to receive the Response of the Recipient, it needs to synchronize the updates of the Backbone. Please note that this synchronization can also be automated by using the Sync Module.    To view the Response to the Request, search for it in the synchronization result or proceed as described in the Query outgoing Requests use case documentation and use the following query parameter:     If the Request was sent via a Template: Specify &lt;ID of RelationshipTemplate&gt; as the value for the source.reference query parameter.   If the Request was sent via a Message: Specify &lt;ID of Request&gt; as the value for the id query parameter.   The Integrator of the Sender can now get the Response of the Recipient from the response.content property of the result. In particular, each requested and shared Attribute that belongs to an accepted ReadAttributeRequestItem can be read from a corresponding ReadAttributeAcceptResponseItem within the items property of the Response. Internally, the shared attribute that can be read from the ReadAttributeAcceptResponseItem is used to create an appropriate LocalAttribute with a LocalAttributeShareInfo of the Sender. On the other hand, there is a corresponding RejectResponseItem in the items property of the Response for each rejected ReadAttributeRequestItem.  In case of an error, ErrorResponseItems can also be included in the Response. If the Request for reading Attributes contains a RequestItemGroup in its items property, the Response to this Request contains a corresponding ResponseItemGroup in its items property.  What’s next?  Take a look at our Integration example if you want to see how an Attribute of a peer is read by an Identity in the context of a larger process. Also note that it is not only possible to request the reading of an Attribute from a peer, but that you can share your own Attribute with a peer as well. Consult the Share own Attribute to peer guide for this.">







  <meta property="article:published_time" content="2024-03-14T15:00:25+01:00">






<link rel="canonical" href="/integrate/read-attribute-from-peer">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="enmeshed Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <link href="/assets/css/overwrite.css" rel="stylesheet" type="text/css" />

<!-- The following lines are needed because otherwise Prism (the syntax highlighter RapiDoc uses) breaks Rouge (the syntax highlighter we use) -->
<script>
    window.Prism = window.Prism || {};
    Prism.manual = true;
</script>
<script type="module" src="https://unpkg.com/rapidoc/dist/rapidoc-min.js"></script>



  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          enmeshed
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/use">Use</a>
            </li><li class="masthead__menu-item">
              <a href="/explore">Explore</a>
            </li><li class="masthead__menu-item">
              <a href="/integrate">Integrate</a>
            </li><li class="masthead__menu-item">
              <a href="/operate">Operate</a>
            </li><li class="masthead__menu-item">
              <a href="/contribute">Contribute</a>
            </li><li class="masthead__menu-item">
              <a href="/blog">Blog</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      <h3>Integrate enmeshed</h3>
      
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Getting Started</span>
        

        
        <ul>
          
            <li><a href="/integrate/access-the-connector">Access the Connector</a></li>
          
            <li><a href="/integrate/integration-example">Integration example</a></li>
          
            <li><a href="/integrate/event-introduction">Event introduction</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Get in touch with other Identities</span>
        

        
        <ul>
          
            <li><a href="/integrate/establish-a-relationship-to-another-identity">Establish a Relationship to another Identity</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Working with requests</span>
        

        
        <ul>
          
            <li><a href="/integrate/request-and-response-introduction">Request and Response introduction</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Manage Requests</span>
        

        
        <ul>
          
            <li><a href="/integrate/requests-over-templates">Requests over Templates</a></li>
          
            <li><a href="/integrate/requests-over-messages">Requests over Messages</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Manage attributes of yourself</span>
        

        
        <ul>
          
            <li><a href="/integrate/create-attribute-for-yourself">Create Attribute for yourself</a></li>
          
            <li><a href="/integrate/share-own-attribute-to-peer">Share own Attribute to peer</a></li>
          
            <li><a href="/integrate/succeeding-attributes-to-update-their-values">Succeeding Attributes to update their values</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Manage attributes of others</span>
        

        
        <ul>
          
            <li><a href="/integrate/read-attribute-from-peer" class="active">Read Attribute from peer</a></li>
          
            <li><a href="/integrate/create-attribute-for-peer">Create Attribute for peer</a></li>
          
            <li><a href="/integrate/propose-attribute-to-peer">Propose Attribute to peer</a></li>
          
            <li><a href="/integrate/request-persistent-consent-of-peer">Request persistent consent of peer</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Basic communication</span>
        

        
        <ul>
          
            <li><a href="/integrate/sending-messages">Sending Messages</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Requesting consent of users</span>
        

        
        <ul>
          
            <li><a href="/integrate/requesting-one-time-consents">Requesting one-time consents</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Data Model</span>
        

        
        <ul>
          
            <li><a href="/integrate/use-cases">Use Cases</a></li>
          
            <li><a href="/integrate/data-model-overview">Data Model Overview</a></li>
          
            <li><a href="/integrate/connector-events">Connector Events</a></li>
          
            <li><a href="/integrate/requests-and-requestitems">Requests and RequestItems</a></li>
          
            <li><a href="/integrate/attribute-values">Attribute Values</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Troubleshooting</span>
        

        
        <ul>
          
            <li><a href="/integrate/error-codes">Error Codes</a></li>
          
            <li><a href="/integrate/faq">FAQ</a></li>
          
            <li><a href="/integrate/support">Support</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
    
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Read Attribute from peer">
    <meta itemprop="description" content="There are many situations in which an Identity is interested in an IdentityAttribute or a RelationshipAttribute of another Identity, for example:  A company must know the age of a customer in order to carry out an age check if they want to purchase alcohol or other age-restricted goods.  A company needs the street address of a customer so that it can send them an invoice after the customer has made a purchase from the company.  An organization is interested in the birth date of a member so that it can wish them a happy birthday every year.  A university needs to know the email address of a student in order to be able to send them emails.In this guide, we explain how a Connector, hereinafter referred to as the Sender, can read an Attribute of another Connector, the so-called Recipient. Since understanding this reading process requires knowledge about Requests and how to use them in general, you should take a look at our Request and Response introduction before continuing reading this guide.Please note that the general procedure is the same if the Connector wants to read an Attribute of an App user instead of another Connector. For reasons of clarity, this guide focuses on the reading process with two Connectors.Request for reading AttributesThe Sender wants to read an Attribute of the Recipient. To do this, the Sender must first create a suitable Request, which it can then send to the Recipient. In the following subsections, we describe the general appearance of a Request for reading Attributes.Role of ReadAttributeRequestItemFor reading a single Attribute, the Sender needs to insert a single RequestItem of type ReadAttributeRequestItem into the items property of the Request. The input it has to provide for the query property of the ReadAttributeRequestItem depends on what type of Attribute it wants to get. If the Sender wants to read an IdentityAttribute, it can use an appropriate IdentityAttributeQuery. If it is interested in a RelationshipAttribute of the Recipient, it can insert a RelationshipAttributeQuery or a ThirdPartyRelationshipAttributeQuery at this point. This depends on whether the Sender wants to read a RelationshipAttribute that the Recipient has in the context of a Relationship with the Sender or with a third party. It is also permitted to specify an IQLQuery for the query property of the ReadAttributeRequestItem.Combinations and usage scenarios of ReadAttributeRequestItemThe following table provides an overview of the possible kinds of Attributes that the Sender can read from the Recipient using the ReadAttributeRequestItem. It must be taken into account whether the Attribute is an IdentityAttribute or a RelationshipAttribute and which Identity is its owner. If the Sender wants to read a RelationshipAttribute from the Recipient, a distinction must be made between which Identities the Relationship in question exists.            Attribute Type      Attribute Owner      Third Party      Possible?      Automation      Examples/Reason                  Identity      Sender             ✗      N/A      It makes no sense to read own IdentityAttributes.              Identity      Recipient             ✓      USER_DECISION      Company asks customer for its delivery address.              Relationship      Sender             ✓      USER_DECISION      With this combination the Sender gives the Recipient the one-time permission to write a RelationshipAttribute once.Example: Electricity provider asks new customers for electricity meter number.              Relationship      Recipient             ✓      USER_DECISION      With this combination the Sender asks the Recipient for the one-time permission to write a RelationshipAttribute.Example: Company asks new customer to subscribe to the newsletter.              Relationship      Recipient      Third Party      ✓      USER DECISION / NOT ALLOWED - depending on confidentiality      With this combination the Sender requests a RelationshipAttribute from a Relationship between the Recipient and a third party that is owned by the Recipient. Example: A social network asks for Facebook privacy settings of a user to get senseful defaults of its own privacy settings.              Relationship      Third Party      Third Party      ✓      USER DECISION / NOT ALLOWED - depending on confidentiality      With this combination the Sender requests a RelationshipAttribute from a Relationship between the Recipient and a third party that is owned by the third party. Example: An online shop asks for the Payback customer ID of a user to book the order on their account.      Example of reading an IdentityAttributeWe assume that the Sender wants to read an IdentityAttribute of type EMailAddress of the Recipient. To do this, it inserts the corresponding IdentityAttributeQuery into the query property of the ReadAttributeRequestItem, which is contained within the items property of the Request for reading Attributes. In our example, we have chosen to set the value of the mustBeAccepted property of the ReadAttributeRequestItem to true.{  &quot;@type&quot;: &quot;Request&quot;,  &quot;items&quot;: [    {      &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,      &quot;mustBeAccepted&quot;: true,      &quot;query&quot;: {        &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,        &quot;valueType&quot;: &quot;EMailAddress&quot;      }    }  ]}Example of reading a RelationshipAttributeWe now consider the case that the Sender has an active Relationship established with the Recipient and that the Sender wants to request a RelationshipAttribute of this Relationship whose value is set by the Recipient. Then the associated ReadAttributeRequestItem, which is contained in the items property of the Request for reading Attributes created by the Sender, must contain an appropriate RelationshipAttributeQuery in its query property. For example, if the Sender wants to request a RelationshipAttribute of type ProprietaryString that is owned by the Recipient and whose confidentiality is &quot;public&quot;, the Request could look like this:{  &quot;@type&quot;: &quot;Request&quot;,  &quot;items&quot;: [    {      &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,      &quot;mustBeAccepted&quot;: true,      &quot;query&quot;: {        &quot;@type&quot;: &quot;RelationshipAttributeQuery&quot;,        &quot;key&quot;: &quot;&lt;key of RelationshipAttribute&gt;&quot;,        &quot;owner&quot;: &quot;&lt;Address of Recipient&gt;&quot;,        &quot;attributeCreationHints&quot;: {          &quot;title&quot;: &quot;&lt;title of RelationshipAttribute&gt;&quot;,          &quot;valueType&quot;: &quot;ProprietaryString&quot;,          &quot;confidentiality&quot;: &quot;public&quot;        }      }    }  ]}Note that the &lt;...&gt; notation is used as a placeholder for the actual data as usual. Further details on the purposes for which you can use a RelationshipAttributeQuery can be found in the table of the Combinations and usage scenarios of the ReadAttributeRequestItem. For information on using the ThirdPartyRelationshipAttributeQuery, you should also refer to this table.Read multiple AttributesRequesting read access is not limited to just a single Attribute, but it is possible to request read access to multiple Attributes at the same time. Several ReadAttributeRequestItems or suitable RequestItemGroups can be inserted into the items property of the Request for reading Attributes for this purpose. If you want to use a RequestItemGroup in order to request read access to multiple Attributes of the Recipient at the same time, you must insert corresponding ReadAttributeRequestItems into the items property of it.Send and receive the RequestThe Sender that wants to read an Attribute of the Recipient may or may not already have a Relationship with the Recipient. Depending on which is the case, a different method can be used to send the Request for reading Attributes. There are two ways to send the Request for reading Attributes created by the Sender to the Recipient.Request over TemplateIf there is currently no Relationship between the Sender and the Recipient, this approach must be used. But it is also possible for the Sender to use a RelationshipTemplate to send a Request to the Recipient if there is already an active Relationship between them. All details on how to send and receive a Request via a RelationshipTemplate in general can be found in the Requests over Templates guide.Request over MessageThe Sender only has the option of sending a Request to the Recipient via a Message if there is already an active Relationship between them. All information on how to send and receive a Request via a Message can be found in the Requests over Messages guide.Accept the RequestAfter the Recipient has received the Request for reading Attributes, it can accept it to give the Sender read access to all or some of the requested Attributes. To do this, proceed as described in the Accept incoming Request use case documentation and specify the id of the received Request. You must also decide and specify for each ReadAttributeRequestItem and RequestItemGroup contained in the Request for reading Attributes whether you want to accept or reject it.If the Recipient does not want the Sender to read any of its Attributes and, therefore, does not want to accept the Request for reading Attributes of the Sender, it can reject it as a whole as well. For this, follow the instructions of the Reject incoming Request use case.Accept a ReadAttributeRequestItemIf the Recipient agrees to share a requested Attribute with the Sender, it can accept the associated ReadAttributeRequestItem contained in the Request for reading Attributes. In particular, it must then provide the requested Attribute for its Response to the Request. Depending on whether the Recipient wants to share an Attribute that already exists as a LocalAttribute or that has to be created first, different parameters for this must be used. These AcceptReadAttributeRequestItemParameters are described in the corresponding section of the Data Model Overview. The acceptance of a ReadAttributeRequestItem always leads to the creation of a LocalAttribute with a LocalAttributeShareInfo contained within its shareInfo property, whose underlying content is given by the shared Attribute. An appropriate AcceptResponseItem of type ReadAttributeAcceptResponseItem is generated, which incorporates the id of the LocalAttribute with the LocalAttributeShareInfo in its attributeId property and the shared Attribute in its attribute property. This ReadAttributeAcceptResponseItem will be included in the items property of the Response to the Request for reading Attributes that will be transferred to the Sender. If a new IdentityAttribute is to be shared, a corresponding LocalAttribute without a LocalAttributeShareInfo is additionally created for the Recipient beforehand.Reject a ReadAttributeRequestItemEven if the Recipient accepts the Request for reading Attributes as a whole, it may decide not to share every requested Attribute with the Sender. To be more precise, the Recipient has the option of rejecting ReadAttributeRequestItems that have the value false specified in their mustBeAccepted property. To reject a ReadAttributeRequestItem, use the RejectRequestItemParameters. The rejection of a ReadAttributeRequestItem leads to the creation of a ResponseItem of type RejectResponseItem. This will be contained within the items property of the Response to the Request for reading Attributes.Example of accepting a RequestItemGroupLet’s look at an example where the Sender is interested in the Recipient’s BirthDate and contact information in the form of an EMailAddress or a PhoneNumber. To ask the Recipient for this data, the Sender creates a Request for reading Attributes, which contains a ReadAttributeRequestItem belonging to the BirthDate and a RequestItemGroup belonging to the contact information in its items property. The RequestItemGroup itself contains two ReadAttributeRequestItems in its items property, namely one for the EMailAddress and one for the PhoneNumber.{  &quot;@type&quot;: &quot;Request&quot;,  &quot;items&quot;: [    {      &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,      &quot;mustBeAccepted&quot;: false,      &quot;query&quot;: {        &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,        &quot;valueType&quot;: &quot;BirthDate&quot;      }    },    {      &quot;@type&quot;: &quot;RequestItemGroup&quot;,      &quot;mustBeAccepted&quot;: true,      &quot;items&quot;: [        {          &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,          &quot;mustBeAccepted&quot;: true,          &quot;query&quot;: {            &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,            &quot;valueType&quot;: &quot;EMailAddress&quot;          }        },        {          &quot;@type&quot;: &quot;ReadAttributeRequestItem&quot;,          &quot;mustBeAccepted&quot;: false,          &quot;query&quot;: {            &quot;@type&quot;: &quot;IdentityAttributeQuery&quot;,            &quot;valueType&quot;: &quot;PhoneNumber&quot;          }        }      ]    }  ]}In our example, the Sender only requires the Recipient to share its EMailAddress, which is why the individual ReadAttributeRequestItems and the RequestItemGroup within the Request have specified corresponding values in their mustBeAccepted property. We assume that the Recipient wants to accept the Request and only wants to share its EMailAddress, which is already saved as an appropriate LocalAttribute, with the Sender.If the Recipient wants to accept the Request for reading Attributes, it must accept all ReadAttributeRequestItems for which the mustBeAccepted property is set to true. It is therefore not permitted, for example, for the Recipient to refuse to share its EMailAddress and instead share its PhoneNumber.The Recipient refuses to share its BirthDate with the Sender and accepts at least one ReadAttributeRequestItem of the RequestItemGroup. Also, the Recipient accepts the sharing of its EMailAddress and rejects the sharing of its PhoneNumber. Thus, it responds to the Request for reading Attributes as follows:{  &quot;items&quot;: [    {      // Reject sharing of BirthDate      &quot;accept&quot;: false    },    {      // Accept RequestItemGroup      &quot;accept&quot;: true,      &quot;items&quot;: [        {          // Accept sharing of existing EMailAddress          &quot;accept&quot;: true,          &quot;existingAttributeId&quot;: &quot;&lt;ID of LocalAttribute of EMailAddress&gt;&quot;        },        {          // Reject sharing of PhoneNumber          &quot;accept&quot;: false        }      ]    }  ]}Note that it is important to respond to RequestItems and RequestItemGroups in the same order in which they were received.Get the AttributesWe now assume that the Recipient has accepted the Request for reading Attributes of the Sender. In order for the Sender to receive the Response of the Recipient, it needs to synchronize the updates of the Backbone. Please note that this synchronization can also be automated by using the Sync Module.To view the Response to the Request, search for it in the synchronization result or proceed as described in the Query outgoing Requests use case documentation and use the following query parameter:  If the Request was sent via a Template: Specify &lt;ID of RelationshipTemplate&gt; as the value for the source.reference query parameter.  If the Request was sent via a Message: Specify &lt;ID of Request&gt; as the value for the id query parameter.The Integrator of the Sender can now get the Response of the Recipient from the response.content property of the result. In particular, each requested and shared Attribute that belongs to an accepted ReadAttributeRequestItem can be read from a corresponding ReadAttributeAcceptResponseItem within the items property of the Response. Internally, the shared attribute that can be read from the ReadAttributeAcceptResponseItem is used to create an appropriate LocalAttribute with a LocalAttributeShareInfo of the Sender. On the other hand, there is a corresponding RejectResponseItem in the items property of the Response for each rejected ReadAttributeRequestItem.In case of an error, ErrorResponseItems can also be included in the Response. If the Request for reading Attributes contains a RequestItemGroup in its items property, the Response to this Request contains a corresponding ResponseItemGroup in its items property.What’s next?Take a look at our Integration example if you want to see how an Attribute of a peer is read by an Identity in the context of a larger process. Also note that it is not only possible to request the reading of an Attribute from a peer, but that you can share your own Attribute with a peer as well. Consult the Share own Attribute to peer guide for this.">
    <meta itemprop="datePublished" content="2024-03-14T15:00:25+01:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="/integrate/read-attribute-from-peer" class="u-url" itemprop="url">Read Attribute from peer
</a>
          </h1>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#request-for-reading-attributes">Request for reading Attributes</a><ul><li><a href="#role-of-readattributerequestitem">Role of ReadAttributeRequestItem</a></li><li><a href="#combinations-and-usage-scenarios-of-readattributerequestitem">Combinations and usage scenarios of ReadAttributeRequestItem</a></li><li><a href="#example-of-reading-an-identityattribute">Example of reading an IdentityAttribute</a></li><li><a href="#example-of-reading-a-relationshipattribute">Example of reading a RelationshipAttribute</a></li><li><a href="#read-multiple-attributes">Read multiple Attributes</a></li></ul></li><li><a href="#send-and-receive-the-request">Send and receive the Request</a><ul><li><a href="#request-over-template">Request over Template</a></li><li><a href="#request-over-message">Request over Message</a></li></ul></li><li><a href="#accept-the-request">Accept the Request</a><ul><li><a href="#accept-a-readattributerequestitem">Accept a ReadAttributeRequestItem</a></li><li><a href="#reject-a-readattributerequestitem">Reject a ReadAttributeRequestItem</a></li><li><a href="#example-of-accepting-a-requestitemgroup">Example of accepting a RequestItemGroup</a></li></ul></li><li><a href="#get-the-attributes">Get the Attributes</a></li><li><a href="#whats-next">What’s next?</a></li></ul>

            </nav>
          </aside>
        
        <p>There are many situations in which an Identity is interested in an <a href="/integrate/data-model-overview#identityattribute">IdentityAttribute</a> or a <a href="/integrate/data-model-overview#relationshipattribute">RelationshipAttribute</a> of another Identity, for example:</p>

<ul>
  <li>A company must know the age of a customer in order to carry out an age check if they want to purchase alcohol or other age-restricted goods.</li>
  <li>A company needs the street address of a customer so that it can send them an invoice after the customer has made a purchase from the company.</li>
  <li>An organization is interested in the birth date of a member so that it can wish them a happy birthday every year.</li>
  <li>A university needs to know the email address of a student in order to be able to send them emails.</li>
</ul>

<p>In this guide, we explain how a Connector, hereinafter referred to as the Sender, can read an <a href="/integrate/data-model-overview#attributes">Attribute</a> of another Connector, the so-called Recipient. Since understanding this reading process requires knowledge about <a href="/integrate/data-model-overview#request">Requests</a> and how to use them in general, you should take a look at our <a href="/integrate/request-and-response-introduction">Request and Response introduction</a> before continuing reading this guide.</p>

<p class="notice--info">Please note that the general procedure is the same if the Connector wants to read an Attribute of an App user instead of another Connector. For reasons of clarity, this guide focuses on the reading process with two Connectors.</p>

<h2 id="request-for-reading-attributes">Request for reading Attributes</h2>

<p>The Sender wants to read an Attribute of the Recipient. To do this, the Sender must first create a suitable Request, which it can then send to the Recipient. In the following subsections, we describe the general appearance of a Request for reading Attributes.</p>

<h3 id="role-of-readattributerequestitem">Role of ReadAttributeRequestItem</h3>

<p>For reading a single Attribute, the Sender needs to insert a single RequestItem of type <a href="/integrate/data-model-overview#readattributerequestitem">ReadAttributeRequestItem</a> into the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#request">Request</a>. The input it has to provide for the <code class="language-plaintext highlighter-rouge">query</code> property of the ReadAttributeRequestItem depends on what type of Attribute it wants to get. If the Sender wants to read an IdentityAttribute, it can use an appropriate <a href="/integrate/data-model-overview#identityattributequery">IdentityAttributeQuery</a>. If it is interested in a RelationshipAttribute of the Recipient, it can insert a <a href="/integrate/data-model-overview#relationshipattributequery">RelationshipAttributeQuery</a> or a <a href="/integrate/data-model-overview#thirdpartyrelationshipattributequery">ThirdPartyRelationshipAttributeQuery</a> at this point. This depends on whether the Sender wants to read a RelationshipAttribute that the Recipient has in the context of a <a href="/integrate/data-model-overview#relationship">Relationship</a> with the Sender or with a third party. It is also permitted to specify an <a href="/integrate/data-model-overview#iqlquery">IQLQuery</a> for the <code class="language-plaintext highlighter-rouge">query</code> property of the ReadAttributeRequestItem.</p>

<h3 id="combinations-and-usage-scenarios-of-readattributerequestitem">Combinations and usage scenarios of ReadAttributeRequestItem</h3>

<p>The following table provides an overview of the possible kinds of Attributes that the Sender can read from the Recipient using the ReadAttributeRequestItem. It must be taken into account whether the <a href="/integrate/data-model-overview#attributes">Attribute</a> is an IdentityAttribute or a RelationshipAttribute and which Identity is its <code class="language-plaintext highlighter-rouge">owner</code>. If the Sender wants to read a RelationshipAttribute from the Recipient, a distinction must be made between which Identities the Relationship in question exists.</p>

<table>
  <thead>
    <tr>
      <th>Attribute Type</th>
      <th>Attribute Owner</th>
      <th>Third Party</th>
      <th style="text-align: center">Possible?</th>
      <th>Automation</th>
      <th>Examples/Reason</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Identity</td>
      <td>Sender</td>
      <td> </td>
      <td style="text-align: center">✗</td>
      <td><code class="language-plaintext highlighter-rouge">N/A</code></td>
      <td>It makes no sense to read own IdentityAttributes.</td>
    </tr>
    <tr>
      <td>Identity</td>
      <td>Recipient</td>
      <td> </td>
      <td style="text-align: center">✓</td>
      <td><code class="language-plaintext highlighter-rouge">USER_DECISION</code></td>
      <td>Company asks customer for its delivery address.</td>
    </tr>
    <tr>
      <td>Relationship</td>
      <td>Sender</td>
      <td> </td>
      <td style="text-align: center">✓</td>
      <td><code class="language-plaintext highlighter-rouge">USER_DECISION</code></td>
      <td>With this combination the <strong>Sender gives the Recipient the one-time permission</strong> to write a RelationshipAttribute once.<br />Example: Electricity provider asks new customers for electricity meter number.</td>
    </tr>
    <tr>
      <td>Relationship</td>
      <td>Recipient</td>
      <td> </td>
      <td style="text-align: center">✓</td>
      <td><code class="language-plaintext highlighter-rouge">USER_DECISION</code></td>
      <td>With this combination the <strong>Sender asks the Recipient for the one-time permission</strong> to write a RelationshipAttribute.<br />Example: Company asks new customer to subscribe to the newsletter.</td>
    </tr>
    <tr>
      <td>Relationship</td>
      <td>Recipient</td>
      <td>Third Party</td>
      <td style="text-align: center">✓</td>
      <td><code class="language-plaintext highlighter-rouge">USER DECISION / NOT ALLOWED</code> - depending on confidentiality</td>
      <td>With this combination the <strong>Sender requests a RelationshipAttribute from a Relationship between the Recipient and a third party that is owned by the Recipient.</strong><br /> Example: A social network asks for Facebook privacy settings of a user to get senseful defaults of its own privacy settings.</td>
    </tr>
    <tr>
      <td>Relationship</td>
      <td>Third Party</td>
      <td>Third Party</td>
      <td style="text-align: center">✓</td>
      <td><code class="language-plaintext highlighter-rouge">USER DECISION / NOT ALLOWED</code> - depending on confidentiality</td>
      <td>With this combination the <strong>Sender requests a RelationshipAttribute from a Relationship between the Recipient and a third party that is owned by the third party.</strong><br /> Example: An online shop asks for the Payback customer ID of a user to book the order on their account.</td>
    </tr>
  </tbody>
</table>

<h3 id="example-of-reading-an-identityattribute">Example of reading an IdentityAttribute</h3>

<p>We assume that the Sender wants to read an IdentityAttribute of type <a href="/integrate/attribute-values#emailaddress">EMailAddress</a> of the Recipient. To do this, it inserts the corresponding IdentityAttributeQuery into the <code class="language-plaintext highlighter-rouge">query</code> property of the <a href="/integrate/data-model-overview#readattributerequestitem">ReadAttributeRequestItem</a>, which is contained within the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#request">Request</a> for reading Attributes. In our example, we have chosen to set the value of the <code class="language-plaintext highlighter-rouge">mustBeAccepted</code> property of the ReadAttributeRequestItem to <code class="language-plaintext highlighter-rouge">true</code>.</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Request"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReadAttributeRequestItem"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityAttributeQuery"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMailAddress"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="example-of-reading-a-relationshipattribute">Example of reading a RelationshipAttribute</h3>

<p>We now consider the case that the Sender has an active Relationship established with the Recipient and that the Sender wants to request a <a href="/integrate/data-model-overview#relationshipattribute">RelationshipAttribute</a> of this Relationship whose <code class="language-plaintext highlighter-rouge">value</code> is set by the Recipient. Then the associated <a href="/integrate/data-model-overview#readattributerequestitem">ReadAttributeRequestItem</a>, which is contained in the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#request">Request</a> for reading Attributes created by the Sender, must contain an appropriate RelationshipAttributeQuery in its <code class="language-plaintext highlighter-rouge">query</code> property. For example, if the Sender wants to request a RelationshipAttribute of type <a href="/integrate/attribute-values#proprietarystring">ProprietaryString</a> that is owned by the Recipient and whose <code class="language-plaintext highlighter-rouge">confidentiality</code> is <code class="language-plaintext highlighter-rouge">"public"</code>, the Request could look like this:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Request"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReadAttributeRequestItem"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RelationshipAttributeQuery"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;key of RelationshipAttribute&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Address of Recipient&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributeCreationHints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;title of RelationshipAttribute&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ProprietaryString"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"confidentiality"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Note that the <code class="language-plaintext highlighter-rouge">&lt;...&gt;</code> notation is used as a placeholder for the actual data as usual. Further details on the purposes for which you can use a RelationshipAttributeQuery can be found in the table of the <a href="/integrate/read-attribute-from-peer#combinations-and-usage-scenarios-of-readattributerequestitem">Combinations and usage scenarios of the ReadAttributeRequestItem</a>. For information on using the ThirdPartyRelationshipAttributeQuery, you should also refer to this table.</p>

<h3 id="read-multiple-attributes">Read multiple Attributes</h3>

<p>Requesting read access is not limited to just a single Attribute, but it is possible to request read access to multiple Attributes at the same time. Several ReadAttributeRequestItems or suitable <a href="/integrate/data-model-overview#requestitemgroup">RequestItemGroups</a> can be inserted into the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#request">Request</a> for reading Attributes for this purpose. If you want to use a RequestItemGroup in order to request read access to multiple Attributes of the Recipient at the same time, you must insert corresponding ReadAttributeRequestItems into the <code class="language-plaintext highlighter-rouge">items</code> property of it.</p>

<h2 id="send-and-receive-the-request">Send and receive the Request</h2>

<p>The Sender that wants to read an Attribute of the Recipient may or may not already have a Relationship with the Recipient. Depending on which is the case, a different method can be used to send the <a href="/integrate/read-attribute-from-peer#request-for-reading-attributes">Request for reading Attributes</a>. There are two ways to send the Request for reading Attributes created by the Sender to the Recipient.</p>

<h3 id="request-over-template">Request over Template</h3>

<p>If there is currently no Relationship between the Sender and the Recipient, this approach must be used. But it is also possible for the Sender to use a <a href="/integrate/data-model-overview#relationshiptemplate">RelationshipTemplate</a> to send a Request to the Recipient if there is already an active Relationship between them. All details on how to send and receive a Request via a RelationshipTemplate in general can be found in the <a href="/integrate/requests-over-templates">Requests over Templates</a> guide.</p>

<h3 id="request-over-message">Request over Message</h3>

<p>The Sender only has the option of sending a Request to the Recipient via a <a href="/integrate/data-model-overview#message">Message</a> if there is already an active Relationship between them. All information on how to send and receive a Request via a Message can be found in the <a href="/integrate/requests-over-messages">Requests over Messages</a> guide.</p>

<h2 id="accept-the-request">Accept the Request</h2>

<p>After the Recipient has received the <a href="/integrate/read-attribute-from-peer#request-for-reading-attributes">Request for reading Attributes</a>, it can accept it to give the Sender read access to all or some of the requested Attributes. To do this, proceed as described in the <a href="/use-case-consumption-accept-incoming-request">Accept incoming Request</a> use case documentation and specify the <code class="language-plaintext highlighter-rouge">id</code> of the received <a href="/integrate/data-model-overview#request">Request</a>. You must also decide and specify for each ReadAttributeRequestItem and RequestItemGroup contained in the Request for reading Attributes whether you want to accept or reject it.</p>

<p class="notice--info">If the Recipient does not want the Sender to read any of its Attributes and, therefore, does not want to accept the Request for reading Attributes of the Sender, it can reject it as a whole as well. For this, follow the instructions of the <a href="/use-case-consumption-reject-incoming-request">Reject incoming Request</a> use case.</p>

<div style="width: 640px; height: 480px; margin: 10px; position: relative;"><iframe allowfullscreen="" frameborder="0" style="width:640px; height:480px" src="https://lucid.app/documents/embedded/164e1c68-0997-4a16-832c-c1e53bb55571" id="NypRt8MoA-HR"></iframe></div>

<h3 id="accept-a-readattributerequestitem">Accept a ReadAttributeRequestItem</h3>

<p>If the Recipient agrees to share a requested Attribute with the Sender, it can accept the associated ReadAttributeRequestItem contained in the Request for reading Attributes. In particular, it must then provide the requested Attribute for its Response to the Request. Depending on whether the Recipient wants to share an Attribute that already exists as a <a href="/integrate/data-model-overview#localattribute">LocalAttribute</a> or that has to be created first, different parameters for this must be used. These <a href="/integrate/data-model-overview#acceptreadattributerequestitemparameters">AcceptReadAttributeRequestItemParameters</a> are described in the corresponding section of the Data Model Overview. The acceptance of a ReadAttributeRequestItem always leads to the creation of a LocalAttribute with a <a href="/integrate/data-model-overview#localattributeshareinfo">LocalAttributeShareInfo</a> contained within its <code class="language-plaintext highlighter-rouge">shareInfo</code> property, whose underlying <code class="language-plaintext highlighter-rouge">content</code> is given by the shared Attribute. An appropriate AcceptResponseItem of type <a href="/integrate/data-model-overview#readattributeacceptresponseitem">ReadAttributeAcceptResponseItem</a> is generated, which incorporates the <code class="language-plaintext highlighter-rouge">id</code> of the LocalAttribute with the LocalAttributeShareInfo in its <code class="language-plaintext highlighter-rouge">attributeId</code> property and the shared Attribute in its <code class="language-plaintext highlighter-rouge">attribute</code> property. This ReadAttributeAcceptResponseItem will be included in the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#response">Response</a> to the Request for reading Attributes that will be transferred to the Sender. If a new IdentityAttribute is to be shared, a corresponding LocalAttribute without a LocalAttributeShareInfo is additionally created for the Recipient beforehand.</p>

<h3 id="reject-a-readattributerequestitem">Reject a ReadAttributeRequestItem</h3>

<p>Even if the Recipient accepts the Request for reading Attributes as a whole, it may decide not to share every requested Attribute with the Sender. To be more precise, the Recipient has the option of rejecting <a href="/integrate/data-model-overview#readattributerequestitem">ReadAttributeRequestItems</a> that have the value <code class="language-plaintext highlighter-rouge">false</code> specified in their <code class="language-plaintext highlighter-rouge">mustBeAccepted</code> property. To reject a ReadAttributeRequestItem, use the <a href="/integrate/data-model-overview#rejectrequestitemparameters">RejectRequestItemParameters</a>. The rejection of a ReadAttributeRequestItem leads to the creation of a ResponseItem of type <a href="/integrate/data-model-overview#rejectresponseitem">RejectResponseItem</a>. This will be contained within the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#response">Response</a> to the Request for reading Attributes.</p>

<h3 id="example-of-accepting-a-requestitemgroup">Example of accepting a RequestItemGroup</h3>

<p>Let’s look at an example where the Sender is interested in the Recipient’s <a href="/integrate/attribute-values#birthdate">BirthDate</a> and contact information in the form of an <a href="/integrate/attribute-values#emailaddress">EMailAddress</a> or a <a href="/integrate/attribute-values#phonenumber">PhoneNumber</a>. To ask the Recipient for this data, the Sender creates a <a href="/integrate/data-model-overview#request">Request</a> for reading Attributes, which contains a ReadAttributeRequestItem belonging to the BirthDate and a RequestItemGroup belonging to the contact information in its <code class="language-plaintext highlighter-rouge">items</code> property. The <a href="/integrate/data-model-overview#requestitemgroup">RequestItemGroup</a> itself contains two ReadAttributeRequestItems in its <code class="language-plaintext highlighter-rouge">items</code> property, namely one for the EMailAddress and one for the PhoneNumber.</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Request"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReadAttributeRequestItem"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityAttributeQuery"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BirthDate"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RequestItemGroup"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReadAttributeRequestItem"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityAttributeQuery"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMailAddress"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReadAttributeRequestItem"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mustBeAccepted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityAttributeQuery"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PhoneNumber"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>In our example, the Sender only requires the Recipient to share its EMailAddress, which is why the individual <a href="/integrate/data-model-overview#readattributerequestitem">ReadAttributeRequestItems</a> and the <a href="/integrate/data-model-overview#requestitemgroup">RequestItemGroup</a> within the Request have specified corresponding values in their <code class="language-plaintext highlighter-rouge">mustBeAccepted</code> property. We assume that the Recipient wants to accept the Request and only wants to share its EMailAddress, which is already saved as an appropriate LocalAttribute, with the Sender.</p>

<p class="notice--info">If the Recipient wants to accept the Request for reading Attributes, it must accept all ReadAttributeRequestItems for which the <code class="language-plaintext highlighter-rouge">mustBeAccepted</code> property is set to <code class="language-plaintext highlighter-rouge">true</code>. It is therefore not permitted, for example, for the Recipient to refuse to share its EMailAddress and instead share its PhoneNumber.</p>

<p>The Recipient refuses to share its BirthDate with the Sender and accepts at least one ReadAttributeRequestItem of the RequestItemGroup. Also, the Recipient accepts the sharing of its EMailAddress and rejects the sharing of its PhoneNumber. Thus, it responds to the Request for reading Attributes as follows:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="c1">// Reject sharing of BirthDate</span><span class="w">
      </span><span class="nl">"accept"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="c1">// Accept RequestItemGroup</span><span class="w">
      </span><span class="nl">"accept"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="c1">// Accept sharing of existing EMailAddress</span><span class="w">
          </span><span class="nl">"accept"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"existingAttributeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;ID of LocalAttribute of EMailAddress&gt;"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="c1">// Reject sharing of PhoneNumber</span><span class="w">
          </span><span class="nl">"accept"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Note that it is important to respond to RequestItems and RequestItemGroups in the same order in which they were received.</p>

<h2 id="get-the-attributes">Get the Attributes</h2>

<p>We now assume that the Recipient has accepted the <a href="/integrate/read-attribute-from-peer#request-for-reading-attributes">Request for reading Attributes</a> of the Sender. In order for the Sender to receive the Response of the Recipient, it needs to <a href="/use-case-transport-synchronize-updates-of-backbone">synchronize the updates of the Backbone</a>. Please note that this synchronization can also be automated by using the <a href="/operate/modules#sync">Sync Module</a>.</p>

<div style="width: 640px; height: 480px; margin: 10px; position: relative;"><iframe allowfullscreen="" frameborder="0" style="width:640px; height:480px" src="https://lucid.app/documents/embedded/c8e5575e-ed55-48c2-897e-68e99d5df932" id="jbZRol4VVGZQ"></iframe></div>

<p>To view the Response to the Request, search for it in the synchronization result or proceed as described in the <a href="/use-case-consumption-query-outgoing-requests">Query outgoing Requests</a> use case documentation and use the following query parameter:</p>

<ul>
  <li>If the <a href="/integrate/read-attribute-from-peer#request-over-template">Request was sent via a Template</a>: Specify <code class="language-plaintext highlighter-rouge">&lt;ID of RelationshipTemplate&gt;</code> as the value for the <code class="language-plaintext highlighter-rouge">source.reference</code> query parameter.</li>
  <li>If the <a href="/integrate/read-attribute-from-peer#request-over-message">Request was sent via a Message</a>: Specify <code class="language-plaintext highlighter-rouge">&lt;ID of Request&gt;</code> as the value for the <code class="language-plaintext highlighter-rouge">id</code> query parameter.</li>
</ul>

<p>The Integrator of the Sender can now get the Response of the Recipient from the <code class="language-plaintext highlighter-rouge">response.content</code> property of the result. In particular, each requested and shared Attribute that belongs to an accepted ReadAttributeRequestItem can be read from a corresponding ReadAttributeAcceptResponseItem within the <code class="language-plaintext highlighter-rouge">items</code> property of the <a href="/integrate/data-model-overview#response">Response</a>. Internally, the shared <code class="language-plaintext highlighter-rouge">attribute</code> that can be read from the <a href="/integrate/data-model-overview#readattributeacceptresponseitem">ReadAttributeAcceptResponseItem</a> is used to create an appropriate LocalAttribute with a LocalAttributeShareInfo of the Sender. On the other hand, there is a corresponding RejectResponseItem in the <code class="language-plaintext highlighter-rouge">items</code> property of the Response for each rejected ReadAttributeRequestItem.</p>

<p class="notice--info">In case of an error, <a href="/integrate/data-model-overview#errorresponseitem">ErrorResponseItems</a> can also be included in the Response. If the Request for reading Attributes contains a RequestItemGroup in its <code class="language-plaintext highlighter-rouge">items</code> property, the Response to this Request contains a corresponding <a href="/integrate/data-model-overview#responseitemgroup">ResponseItemGroup</a> in its <code class="language-plaintext highlighter-rouge">items</code> property.</p>

<h2 id="whats-next">What’s next?</h2>

<p>Take a look at our <a href="/integrate/integration-example">Integration example</a> if you want to see how an Attribute of a peer is read by an Identity in the context of a larger process. Also note that it is not only possible to request the reading of an Attribute from a peer, but that you can share your own Attribute with a peer as well. Consult the <a href="/integrate/share-own-attribute-to-peer">Share own Attribute to peer</a> guide for this.</p>


        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2024-03-14T15:00:25+01:00">March 14, 2024</time></p>

      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
    <ul class="social-icons">
           
        <li>
            <a href="/legal" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-info" aria-hidden="true"></i> Legal Disclosure</a>
        </li>
          
        <li>
            <a href="/privacy" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-user-shield" aria-hidden="true"></i> Privacy Statement</a>
        </li>
          
        <li>
            <a href="https://www.enmeshed.eu" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a>
        </li>
          
        <li>
            <a href="https://github.com/nmshd" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a>
        </li>
          
        <li>
            <a href="https://www.npmjs.com/search?q=%40nmshd" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-npm" aria-hidden="true"></i> NPM</a>
        </li>
           
        <li>
            <a href="/feed.xml"
                ><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a
            >
        </li>
        
    </ul>
</div>

<div class="page__footer-copyright">
    &copy; 2024
    <a href="https://www.js-soft.com">j&amp;s-soft GmbH</a>. Powered by
    <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.
</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
